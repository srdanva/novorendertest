const A=Symbol("Comlink.proxy"),e=Symbol("Comlink.endpoint"),t=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.thrown"),n=A=>"object"==typeof A&&null!==A||"function"==typeof A,i=new Map([["proxy",{canHandle:e=>n(e)&&e[A],serialize(A){const{port1:e,port2:t}=new MessageChannel;return r(A,e),[t,[t]]},deserialize:A=>(A.start(),a(A))}],["throw",{canHandle:A=>n(A)&&s in A,serialize({value:A}){let e;return e=A instanceof Error?{isError:!0,value:{message:A.message,name:A.name,stack:A.stack}}:{isError:!1,value:A},[e,[]]},deserialize(A){if(A.isError)throw Object.assign(new Error(A.value.message),A.value);throw A.value}}]]);function r(A,e=self){e.addEventListener("message",(function t(n){if(!n||!n.data)return;const{id:i,type:a,path:w}=Object.assign({path:[]},n.data),B=(n.data.argumentList||[]).map(b);let I;try{const e=w.slice(0,-1).reduce(((A,e)=>A[e]),A),t=w.reduce(((A,e)=>A[e]),A);switch(a){case"GET":I=t;break;case"SET":e[w.slice(-1)[0]]=b(n.data.value),I=!0;break;case"APPLY":I=t.apply(e,B);break;case"CONSTRUCT":I=g(new t(...B));break;case"ENDPOINT":{const{port1:e,port2:t}=new MessageChannel;r(A,t),I=c(e,[e])}break;case"RELEASE":I=void 0;break;default:return}}catch(A){I={value:A,[s]:0}}Promise.resolve(I).catch((A=>({value:A,[s]:0}))).then((A=>{const[s,n]=l(A);e.postMessage(Object.assign(Object.assign({},s),{id:i}),n),"RELEASE"===a&&(e.removeEventListener("message",t),o(e))}))})),e.start&&e.start()}function o(A){(function(A){return"MessagePort"===A.constructor.name})(A)&&A.close()}function a(A,e){return B(A,[],e)}function w(A){if(A)throw new Error("Proxy has been released and is not useable")}function B(A,s=[],n=function(){}){let i=!1;const r=new Proxy(n,{get(e,n){if(w(i),n===t)return()=>d(A,{type:"RELEASE",path:s.map((A=>A.toString()))}).then((()=>{o(A),i=!0}));if("then"===n){if(0===s.length)return{then:()=>r};const e=d(A,{type:"GET",path:s.map((A=>A.toString()))}).then(b);return e.then.bind(e)}return B(A,[...s,n])},set(e,t,n){w(i);const[r,o]=l(n);return d(A,{type:"SET",path:[...s,t].map((A=>A.toString())),value:r},o).then(b)},apply(t,n,r){w(i);const o=s[s.length-1];if(o===e)return d(A,{type:"ENDPOINT"}).then(b);if("bind"===o)return B(A,s.slice(0,-1));const[a,C]=I(r);return d(A,{type:"APPLY",path:s.map((A=>A.toString())),argumentList:a},C).then(b)},construct(e,t){w(i);const[n,r]=I(t);return d(A,{type:"CONSTRUCT",path:s.map((A=>A.toString())),argumentList:n},r).then(b)}});return r}function I(A){const e=A.map(l);return[e.map((A=>A[0])),(t=e.map((A=>A[1])),Array.prototype.concat.apply([],t))];var t}const C=new WeakMap;function c(A,e){return C.set(A,e),A}function g(e){return Object.assign(e,{[A]:!0})}function l(A){for(const[e,t]of i)if(t.canHandle(A)){const[s,n]=t.serialize(A);return[{type:"HANDLER",name:e,value:s},n]}return[{type:"RAW",value:A},C.get(A)||[]]}function b(A){switch(A.type){case"HANDLER":return i.get(A.name).deserialize(A.value);case"RAW":return A.value}}function d(A,e,t){return new Promise((s=>{const n=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");A.addEventListener("message",(function e(t){t.data&&t.data.id&&t.data.id===n&&(A.removeEventListener("message",e),s(t.data))})),A.start&&A.start(),A.postMessage(Object.assign({id:n},e),t)}))}var h="undefined"!=typeof Float32Array?Float32Array:Array;function u(){var A=new h(9);return h!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}function m(A,e){var t=e[0],s=e[1],n=e[2],i=e[3],r=e[4],o=e[5],a=e[6],w=e[7],B=e[8],I=e[9],C=e[10],c=e[11],g=e[12],l=e[13],b=e[14],d=e[15],h=t*o-s*r,u=t*a-n*r,m=t*w-i*r,D=s*a-n*o,f=s*w-i*o,Q=n*w-i*a,E=B*l-I*g,T=B*b-C*g,M=B*d-c*g,v=I*b-C*l,p=I*d-c*l,y=C*d-c*b,F=h*y-u*p+m*v+D*M-f*T+Q*E;return F?(F=1/F,A[0]=(o*y-a*p+w*v)*F,A[1]=(a*M-r*y-w*T)*F,A[2]=(r*p-o*M+w*E)*F,A[3]=(n*p-s*y-i*v)*F,A[4]=(t*y-n*M+i*T)*F,A[5]=(s*M-t*p-i*E)*F,A[6]=(l*Q-b*f+d*D)*F,A[7]=(b*m-g*Q-d*u)*F,A[8]=(g*f-l*m+d*h)*F,A):null}function D(){var A=new h(16);return h!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A}function f(A,e,t){var s=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],w=e[6],B=e[7],I=e[8],C=e[9],c=e[10],g=e[11],l=e[12],b=e[13],d=e[14],h=e[15],u=t[0],m=t[1],D=t[2],f=t[3];return A[0]=u*s+m*o+D*I+f*l,A[1]=u*n+m*a+D*C+f*b,A[2]=u*i+m*w+D*c+f*d,A[3]=u*r+m*B+D*g+f*h,u=t[4],m=t[5],D=t[6],f=t[7],A[4]=u*s+m*o+D*I+f*l,A[5]=u*n+m*a+D*C+f*b,A[6]=u*i+m*w+D*c+f*d,A[7]=u*r+m*B+D*g+f*h,u=t[8],m=t[9],D=t[10],f=t[11],A[8]=u*s+m*o+D*I+f*l,A[9]=u*n+m*a+D*C+f*b,A[10]=u*i+m*w+D*c+f*d,A[11]=u*r+m*B+D*g+f*h,u=t[12],m=t[13],D=t[14],f=t[15],A[12]=u*s+m*o+D*I+f*l,A[13]=u*n+m*a+D*C+f*b,A[14]=u*i+m*w+D*c+f*d,A[15]=u*r+m*B+D*g+f*h,A}function Q(A,e,t){var s,n,i,r,o,a,w,B,I,C,c,g,l=t[0],b=t[1],d=t[2];return e===A?(A[12]=e[0]*l+e[4]*b+e[8]*d+e[12],A[13]=e[1]*l+e[5]*b+e[9]*d+e[13],A[14]=e[2]*l+e[6]*b+e[10]*d+e[14],A[15]=e[3]*l+e[7]*b+e[11]*d+e[15]):(s=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],w=e[6],B=e[7],I=e[8],C=e[9],c=e[10],g=e[11],A[0]=s,A[1]=n,A[2]=i,A[3]=r,A[4]=o,A[5]=a,A[6]=w,A[7]=B,A[8]=I,A[9]=C,A[10]=c,A[11]=g,A[12]=s*l+o*b+I*d+e[12],A[13]=n*l+a*b+C*d+e[13],A[14]=i*l+w*b+c*d+e[14],A[15]=r*l+B*b+g*d+e[15]),A}function E(A,e){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=e[0],A[13]=e[1],A[14]=e[2],A[15]=1,A}function T(A,e){var t=Math.sin(e),s=Math.cos(e);return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=s,A[6]=t,A[7]=0,A[8]=0,A[9]=-t,A[10]=s,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function M(A,e){var t=Math.sin(e),s=Math.cos(e);return A[0]=s,A[1]=0,A[2]=-t,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=t,A[9]=0,A[10]=s,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function v(A,e){return A[0]=e[12],A[1]=e[13],A[2]=e[14],A}Math.hypot||(Math.hypot=function(){for(var A=0,e=arguments.length;e--;)A+=arguments[e]*arguments[e];return Math.sqrt(A)});var p=f;function y(){var A=new h(3);return h!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function F(A){var e=A[0],t=A[1],s=A[2];return Math.hypot(e,t,s)}function U(A,e,t){var s=new h(3);return s[0]=A,s[1]=e,s[2]=t,s}function z(A,e){return A[0]=e[0],A[1]=e[1],A[2]=e[2],A}function x(A,e,t,s){return A[0]=e,A[1]=t,A[2]=s,A}function L(A,e,t){return A[0]=e[0]+t[0],A[1]=e[1]+t[1],A[2]=e[2]+t[2],A}function j(A,e,t){return A[0]=e[0]-t[0],A[1]=e[1]-t[1],A[2]=e[2]-t[2],A}function J(A,e,t){return A[0]=Math.min(e[0],t[0]),A[1]=Math.min(e[1],t[1]),A[2]=Math.min(e[2],t[2]),A}function H(A,e,t){return A[0]=Math.max(e[0],t[0]),A[1]=Math.max(e[1],t[1]),A[2]=Math.max(e[2],t[2]),A}function O(A,e,t){return A[0]=e[0]*t,A[1]=e[1]*t,A[2]=e[2]*t,A}function K(A,e,t,s){var n=e[0],i=e[1],r=e[2];return A[0]=n+s*(t[0]-n),A[1]=i+s*(t[1]-i),A[2]=r+s*(t[2]-r),A}function S(A,e,t){var s=e[0],n=e[1],i=e[2],r=t[3]*s+t[7]*n+t[11]*i+t[15];return r=r||1,A[0]=(t[0]*s+t[4]*n+t[8]*i+t[12])/r,A[1]=(t[1]*s+t[5]*n+t[9]*i+t[13])/r,A[2]=(t[2]*s+t[6]*n+t[10]*i+t[14])/r,A}function N(A,e,t){var s=e[0],n=e[1],i=e[2];return A[0]=s*t[0]+n*t[3]+i*t[6],A[1]=s*t[1]+n*t[4]+i*t[7],A[2]=s*t[2]+n*t[5]+i*t[8],A}function k(A,e){return A[0]===e[0]&&A[1]===e[1]&&A[2]===e[2]}var G=j,Y=F;function P(){var A=new h(4);return h!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0),A}function R(A,e,t,s){var n=new h(4);return n[0]=A,n[1]=e,n[2]=t,n[3]=s,n}function V(A,e){return A[0]=e[0],A[1]=e[1],A[2]=e[2],A[3]=e[3],A}function W(A,e){return A[0]*e[0]+A[1]*e[1]+A[2]*e[2]+A[3]*e[3]}function X(A,e,t,s){var n=e[0],i=e[1],r=e[2],o=e[3];return A[0]=n+s*(t[0]-n),A[1]=i+s*(t[1]-i),A[2]=r+s*(t[2]-r),A[3]=o+s*(t[3]-o),A}function Z(){var A=new h(4);return h!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A[3]=1,A}y(),P();var q,_,$,AA,eA=R;function tA(A,e){var t=new h(2);return t[0]=A,t[1]=e,t}function sA(A,e){}y(),U(1,0,0),U(0,1,0),Z(),Z(),u(),function(){var A;A=new h(2),h!=Float32Array&&(A[0]=0,A[1]=0)}();class nA{size;layout;view;stride;offsets={};constructor(A,e){this.size=A,this.layout=e,this.view=new Float32Array(new ArrayBuffer(A*this.layout.stride)),this.stride=e.stride/4;const{offsets:t}=this;for(const A of e.attributes)t[A.semantic]=A.byteOffset/4}set(A){const{view:e,stride:t,offsets:s}=this,n=s[A];return void 0===n?sA:function(A,s){s&&e.set(s,A*t+n)}}}function iA(){const A=Math.PI/2,e=[D(),D(),D(),D(),D(),D()];var t;return(t=e[0])[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,T(e[1],1*A),T(e[2],2*A),T(e[3],3*A),M(e[4],A),M(e[5],-A),e}function rA(A,e){if(A==e)return!0;if("object"!=typeof A||"object"!=typeof e)return!1;const t=Object.keys(A),s=Object.keys(e);if(t.length!=s.length)return!1;for(let A=0;A<t.length;A++)if(t[A]!=s[A])return!1;for(var n of t)if(A[n],e[n],!rA(A[n],e[n]))return!1;return!0}y(),Z(),y();class oA{download;abortController;result=Promise.resolve(void 0);aborted=!1;constructor(A){this.download=A}start(){this.result=this.download()}abort(){this.aborted||(this.aborted=!0,this.abortController?.abort())}}class aA{baseUrl;activeDownloads=0;abortController=new AbortController;static createImageData;constructor(A){this.baseUrl=A}abort(){this.abortController.abort(),this.abortController=new AbortController}async request(A,e){const t=new URL(A,this.baseUrl);t.search||(t.search=this.baseUrl?.search??"");const s=(e??this.abortController).signal,n=await fetch(t.toString(),{mode:"cors",signal:s});if(!n.ok)throw new Error(`HTTP Error: ${n.status}: ${n.statusText} (${t})`);return n}async downloadJson(A,e){try{this.activeDownloads++;const t=await this.request(A,e);return await t.json()}finally{this.activeDownloads--}}async downloadArrayBuffer(A,e){try{this.activeDownloads++;const t=await this.request(A,e);if(!t.ok)throw new Error(`HTTP error: ${t.status} ${t.statusText}!`);return await t.arrayBuffer()}finally{this.activeDownloads--}}downloadArrayBufferAbortable(A){const e=this,t=new oA((async function(){try{e.activeDownloads++;const s=await e.request(A,t.abortController);if(!s.ok)throw new Error(`HTTP error: ${s.status} ${s.statusText}!`);t.abortController=void 0;const n=s.body.getReader(),i=[];let r=0;for(;!t.aborted;){const{done:A,value:e}=await n.read();if(A)break;i.push(e),r+=e.length}if(!t.aborted){const A=new Uint8Array(r);let e=0;for(const t of i)A.set(t,e),e+=t.length;return A.buffer}n.cancel()}finally{e.activeDownloads--}}));return t.start(),t}async downloadBlob(A,e){try{this.activeDownloads++;const t=await this.request(A,e);return await t.blob()}finally{this.activeDownloads--}}async downloadImage(A,e){try{this.activeDownloads++;const t=await this.downloadBlob(A,e);return this.createImageFromBlob(t)}finally{this.activeDownloads--}}async createImageFromBlob(A){return await("OffscreenCanvas"in self?createImageBitmap(A):aA.createImageData(A))}}class wA{static positions=[U(-1,-1,1),U(1,-1,1),U(-1,1,1),U(1,1,1)];static texcoords=[tA(0,0),tA(1,0),tA(0,1),tA(1,1)];static normal=U(0,0,1);normal=y();centroid=y();mesh;visible=!1;constructor(A,e,t){const s=new nA(4,e.vertexLayout),n=u();m(n,t),N(this.normal,wA.normal,n),S(this.centroid,wA.normal,t);const i=s.set(0),r=s.set(1),o=s.set(4),a=y();for(let A=0;A<4;A++)S(a,wA.positions[A],t),i(A,a),r(A,this.normal),o(A,wA.texcoords[A]);this.mesh=A.createMesh(e,!0,5,s.view.buffer,s.size)}add(){this.mesh.update({visible:!0})}remove(){this.mesh.update({visible:!1})}dispose(){this.mesh.delete()}facesTowards(A){const e=y();return j(e,this.centroid,A),function(A,e){return A[0]*e[0]+A[1]*e[1]+A[2]*e[2]}(e,this.normal)<0}}class BA{static matrices=iA();centroid=y();sides;visible=!1;constructor(A,e){v(this.centroid,e);const t=D(),s=new Array(6);for(let n=0;n<6;n++){f(t,e,BA.matrices[n]);const i=new wA(A.renderContext,A.materials[n],t);s[n]=i}this.sides=s}cull(A,e){const[t,s,n]=this.centroid,i=R(t,s,n,1),r=Math.sqrt(3);let o=!1;for(const A of e)if(W(A,i)>r){o=!0;break}if(this.visible=!o,this.visible)for(const A of this.sides)A.visible=!0}render(){const{visible:A}=this;if(A)for(const A of this.sides)A.visible?A.add():A.visible||A.remove();else for(const A of this.sides)A.remove()}dispose(){for(const A of this.sides)A.dispose()}}class IA{scene;cubes=[];previousGeneration=0;transform=D();constructor(A,e){this.scene=A;const{cubes:t}=this,{radius:s,count:n}=e,i=D();for(let e=0;e<n;e++){const e=new BA(A,i);t.push(e)}}update(A,e,t,s){const{cubes:n,previousGeneration:i}=this,{generation:r,viewFrustum:o,viewModelMatrix:a}=A;if(i!=r){this.previousGeneration=r;const A=y();v(A,a);const{left:e,right:t,top:s,bottom:i}=o,w=[e,t,s,i];for(const e of n)e.cull(A,w),e.render()}}async dispose(){const{cubes:A}=this;for(const e of A)e.dispose()}}(q||(q={})).create=async function(A,e){return new IA(A,e)},function(A){const e=[0,1,5,0,5,4,1,2,6,1,6,5,2,3,7,2,7,6,3,0,4,3,4,7],t=[U(-1,-1,1),U(1,-1,1),U(1,1,1),U(-1,1,1),U(-.99,-.99,1),U(.99,-.99,1),U(.99,.99,1),U(-.99,.99,1)],s=[tA(0,0),tA(1,0),tA(1,1),tA(0,1),tA(.005,.005),tA(.995,.005),tA(.995,.995),tA(.005,.995)],n=iA(),i=U(0,0,1),r=y(),o=t.length,a=e.length;function w(A,n,w,B,I){const C=u();m(C,I),N(r,i,C);const c=A.set(0),g=A.set(1),l=A.set(4),b=y();for(let A=0;A<o;A++){const e=A+n;S(b,t[A],I),c(e,b),g(e,r),l(e,s[A])}for(let A=0;A<a;A++)w[A+B]=e[A]+n}A.create=function(A,e,t,s=!0){const i=y();L(i,t.min,t.max),O(i,i,.5);const r=y();j(r,t.max,t.min),O(r,r,.5),j(r,r,U(.01,.01,.01));const B=D(),I=D();var C,c,g,l,b,d;Q(B,B,i),C=I,c=I,l=(g=r)[0],b=g[1],d=g[2],C[0]=c[0]*l,C[1]=c[1]*l,C[2]=c[2]*l,C[3]=c[3]*l,C[4]=c[4]*b,C[5]=c[5]*b,C[6]=c[6]*b,C[7]=c[7]*b,C[8]=c[8]*d,C[9]=c[9]*d,C[10]=c[10]*d,C[11]=c[11]*d,C[12]=c[12],C[13]=c[13],C[14]=c[14],C[15]=c[15];const h=new nA(6*o,e.vertexLayout),u=new Uint16Array(6*a),m=D();for(let A=0;A<6;A++)f(m,I,n[A]),w(h,A*o,u,A*a,m);return A.createMesh(e,s,4,h.view.buffer,u,void 0,B)}}(_||(_={}));class CA{visible=!1;centroid=y();mesh;constructor(A,e,t){this.mesh=_.create(A,e,t)}cull(A){const[e,t,s]=this.centroid,n=R(e,t,s,1),i=Math.sqrt(3);let r=!1;for(const e of A)if(W(e,n)>i){r=!0;break}this.visible=!r}render(){const{visible:A,mesh:e}=this;A?e.update({visible:!0}):e.update({visible:!1})}dispose(){this.mesh.delete()}}class cA{scene;objects=[];previousGeneration=0;constructor(A){this.scene=A;const{objects:e}=this,{renderContext:t}=A,s={min:U(-1,-1,-1),max:U(1,1,1)},n=new CA(t,A.materials[0],s);e.push(n)}update(A,e,t,s){const{objects:n,previousGeneration:i}=this,{generation:r,viewFrustum:o}=A;if(i!=r){this.previousGeneration=r;const{left:A,right:e,top:t,bottom:s}=o,i=[A,e,t,s];for(const A of n)A.cull(i),A.render()}}dispose(){const{objects:A}=this;for(const e of A)e.dispose()}}!function(A){A.assetsPath="assets/test",A.create=async function(A,e){return A.renderContext,new cA(A)}}($||($={})),function(A){A[A.baseColor=0]="baseColor"}(AA||(AA={}));const gA=new Map([[AA.baseColor,"albedo"]]);class lA{position=0;view;version;constructor(A,e){this.view=new DataView(A),this.version=e}read(A,e){const t=this.view[A](this.position,!0);return this.position+=e,t}get eof(){return this.position==this.view.byteLength}i8(){return this.read("getInt8",1)}u8(){return this.read("getUint8",1)}i16(){return this.read("getInt16",2)}u16(){return this.read("getUint16",2)}i32(){return this.read("getInt32",4)}u32(){return this.read("getUint32",4)}f32(){return this.read("getFloat32",4)}f64(){return this.read("getFloat64",8)}buffer(){const A=this.u32(),e=this.view.buffer.slice(this.position,this.position+A);return this.position+=A,e}vec3(){return U(this.f32(),this.f32(),this.f32())}int3(){return U(this.i32(),this.i32(),this.i32())}double3(){return U(this.f64(),this.f64(),this.f64())}aabb(){return{min:this.vec3(),max:this.vec3()}}boundingSphere(){return{center:this.vec3(),radius:this.f32()}}bounds(){return{box:this.aabb(),sphere:this.boundingSphere()}}attribute(){return{semantic:this.u8(),components:this.u8(),type:this.u16(),normalized:0!==this.u8(),offset:this.i32(),stride:this.u8()}}attributes(){const A=new Array(this.u8());for(let e=0;e<A.length;e++)A[e]=this.attribute();return A}mesh(){const A=this.u32(),e=this.vec3(),t=this.attributes(),s=this.i32(),n=this.i32(),i=this.buffer(),r=n?this.buffer():1*s,o=[],a=[],w=[];if("1.3"!==this.version){a.length=this.i32();for(let A=0;A<a.length;A++)a[A]=this.i32();w.length=a.length;for(let A=0;A<w.length;A++)w[A]=this.i32();o.length=this.i32();for(let A=0;A<o.length;A++)o[A]={semantic:gA.get(this.u32())??"diffuse",transform:(B=this.f32(),I=this.f32(),C=this.f32(),c=this.f32(),g=this.f32(),l=this.f32(),b=this.f32(),d=this.f32(),u=this.f32(),m=void 0,m=new h(9),m[0]=B,m[1]=I,m[2]=C,m[3]=c,m[4]=g,m[5]=l,m[6]=b,m[7]=d,m[8]=u,m),data:this.buffer()}}var B,I,C,c,g,l,b,d,u,m;return{kind:A,center:e,attributes:t,vertices:i,indices:r,numVertices:s,numTriangles:n,textures:o,subnodesCounts:a,subnodesOffsets:w}}object(){const A=this.u32(),e=new Array(this.u32());for(let A=0;A<e.length;A++)e[A]=this.mesh();return{id:A,meshes:e}}baseOctreeNodeData(A,e){const t=A?this.version>"1.5"?this.double3():this.int3():void 0,s=this.bounds();if(t){const{sphere:A,box:e}=s;L(A.center,A.center,t),L(e.min,e.min,t),L(e.max,e.max,t)}const n=this.u8(),i=n>0?this.i32():0,r=n>0?this.i32():0,o=n>0?this.i32():0,a=n>0&&"1.3"!==this.version?this.i32():0,w=e>0?this.i32():0,B=[];for(var I=0;I<w;I++)B.splice(-1,0,this.u32());return{offset:t,originalBounds:s,childrenByteMask:n,tolerance:i,totalChildrenTriangles:r,totalChildrenVertices:o,totalChildrenTextureBytes:a,ids:B}}mergedOctreeNodeGeometry(A){let e=0,t=0,s=0,n=0,i=0;const r=new Array(this.u32());for(let A=0;A<r.length;A++){const o=this.mesh();o.textures.length>0&&(s+=o.textures.map((A=>A.data.byteLength)).reduce(((A,e)=>A+e))),n+="number"==typeof o.indices?0:o.indices?.byteLength,i+=o.vertices.byteLength,e+=o.numVertices,t+=o.numTriangles,r[A]=o}return{offset:A,meshes:r,textureBytes:s,indexBytes:n,vertexBytes:i,vertexCount:e,triangleCount:t}}}function bA(A,e,t,s){const n=new lA(t,A);let i=0;19741023===n.i32()?i=n.i32():n.position=0;const r=[];for(let A=0;A<8;A++)if(e&1<<A){const A=n.baseOctreeNodeData(void 0!==s,i);r.push(A)}return{children:r,geometry:n.mergedOctreeNodeGeometry(s)}}function dA(A,e,t,s,n){const i=s[n[0]++];if(0==i)A.add(e);else for(let r=0;r<8;r++)i&1<<r&&dA(A,e+r,t+1,s,n)}function hA(A,e){return e.length>0?dA(A,"",0,e,[0]):A.add(""),A}function uA(A,e,t,s,n,i){const{offset:r}=e,o=D();r&&E(o,r);const a=z(y(),A.originalBounds.sphere.center);return r&&L(a,a,r),e.meshes.map((e=>{let r,w,B,I="number"==typeof e.indices?e.indices:e.numVertices<65536?new Uint16Array(e.indices):new Uint32Array(e.indices);switch(e.kind){case 1:case 5:case 0:case 4:case 3:case 10:case 11:B=a,r=4;break;case 7:r=1;break;case 2:case 6:case 8:case 9:case 12:case 13:r=0,w=A.tolerance;break;default:throw new Error("Unknown mesh type!")}let C=e.textures;if(C.length>1&&10===e.kind){let A=0;switch(s.textureResolution){case.25:A=2;break;case.5:A=1}C=[e.textures[A]]}const{vertices:c}=e,g=t.createMesh(n[e.kind],i,r,c,I,C,o,B),l=void 0!==w?{tolerance:Math.pow(2,w)}:{};return i?g.update({visible:!0,uniforms:{...l,octantMask:255}}):g.update({visible:!1,uniforms:{...l}}),g}))}class mA{id;octantMask;data;children=[];visibility=0;projectedSize=0;gpuBytes=0;tolerance=0;markedForCollapse=!1;childrenGPUBytes;childrenTriangles;center=y();center4=P();corners=new Array(8);radius;meshes=[];download;state=0;size;subnodesMeshCounts=[];subnodesMeshOffsets=[];constructor(A,e,t){this.id=A,this.octantMask=e,this.data=t;const{center:s,center4:n,corners:i}=this,r=t.originalBounds.box;var o,a,w,B;z(s,t.originalBounds.sphere.center),this.tolerance=t.tolerance,this.radius=t.originalBounds.sphere.radius,o=n,a=s[0],w=s[1],B=s[2],o[0]=a,o[1]=w,o[2]=B,o[3]=1,t.childrenByteMask,this.size=Math.max(r.max[0]-r.min[0],Math.max(r.max[1]-r.min[1],r.max[2]-r.min[2])),this.size*=4;const[I,C,c]=r.min,[g,l,b]=r.max;i[0]=R(I,C,c,1),i[1]=R(g,C,c,1),i[2]=R(I,l,c,1),i[3]=R(g,l,c,1),i[4]=R(I,C,b,1),i[5]=R(g,C,b,1),i[6]=R(I,l,b,1),i[7]=R(g,l,b,1);const d=t.totalChildrenVertices>=65536?12:6;this.childrenGPUBytes=t.totalChildrenTextureBytes+t.totalChildrenTriangles*d+44*t.totalChildrenVertices,this.childrenTriangles=t.totalChildrenTriangles}dispose(){const{children:A,download:e,meshes:t}=this;for(const A of t)A.delete();for(const e of A)e.dispose();t.length=0,A.length=0,this.gpuBytes=0,this.state=0,e&&(this.download=void 0,e.abort())}get path(){return`0${this.id}`}update(A,e,t,s,n=2){this.visibility=2==n?this.computeVisibility(e):n;const{center4:i,visibility:r,radius:o}=this;if(r<=1)this.projectedSize=0;else if("pinhole"==A){const A=Math.max(.001,W(t,i)-o);this.projectedSize=this.size*s[5]/(-A*s[11])}else this.projectedSize=this.size*s[5]}beginDownload(A){this.download=A,this.state=2}endDownload(A,e,t,s,n){const i=this.data;this.download=void 0,this.state=3;const{childrenByteMask:r}=this.data,{children:o,geometry:a}=bA(A,r,t,i.offset);this.children.length=0;for(let A=0;A<8;A++)if(r&1<<A){const e=o.shift(),t=this.createChild(A,e);this.children.push(t)}const w=uA(i,a,e,s,n,!1);this.subnodesMeshCounts=a.meshes.map((A=>A.subnodesCounts)),this.subnodesMeshOffsets=a.meshes.map((A=>A.subnodesOffsets)),this.meshes.length=0,this.meshes.push(...w),this.gpuBytes=a.textureBytes+a.vertexBytes+a.indexBytes}createChild(A,e){return new mA(this.id+A,1<<A,e)}render(A){const{children:e,meshes:t,visibility:s}=this;let n=0;for(const A of e)0==A.children.length&&1!=A.visibility&&(n|=A.octantMask);const i=1!=s&&0!=n;for(let A=0;A<t.length;A++){const e=t[A];if(e&&(e.visible!==i||e.uniforms?.octantMask!=n)){let t,s=i;if(i&&e.uniforms?.octantMask!=n&&this.subnodesMeshCounts[A]?.length){const e=[],i=[];let r=0;const o=this.subnodesMeshCounts[A],a=this.subnodesMeshOffsets[A];for(let A=0;A<o.length;A++){const t=o[A];t>0&&(n&1<<A?(i.push(a[A]),e.push(t)):r++)}r?i.length>0?t={offsets:i,counts:e}:s=!1:t={offsets:[],counts:[]}}e.update({visible:s,uniforms:{...e.uniforms,octantMask:n},drawElements:t})}}}get renderedTriangles(){const{meshes:A,visibility:e,children:t}=this;let s=0;for(const A of t)0==A.children.length&&(s|=A.octantMask);let n=0;if(1!=e&&0!=s)for(let e=0;e<A.length;e++){const t=this.subnodesMeshCounts[e];let i=0;for(let A=0;A<t.length;A++){const e=t[A];e>0&&s&1<<A&&(i+=e)}const r=A[e];if(r){const{primitiveType:A}=r;switch(A){case 4:i/=3;break;case 5:case 6:i-=2;break;case 1:i/=2}n+=i}}return n}computeVisibility(A){const{center4:e,radius:t,corners:s}=this;let n=!0,i=!1;for(const s of A){const A=W(s,e);if(A>t){i=!0,n=!1;break}A>-t&&(n=!1)}if(n===i){i=!0,n=!0;for(const e of s)for(const t of A)W(t,e)>0?n=!1:i=!1}let r=0;return r=i?1:n?3:2,r}get isLeaf(){return 0==this.data.childrenByteMask}shouldSplit(A){const{visibility:e,projectedSize:t}=this;return 1!=e&&t>A}split(){this.state=1}collapse(){const{children:A,meshes:e,download:t}=this;for(const A of e)A.delete();for(const e of A)e.dispose();e.length=0,A.length=0,this.gpuBytes=0,this.state=0,t&&(this.download=void 0,t.abort())}}function DA(A){if(A){var e=atob(A),t=e.length,s=new Uint8ClampedArray(t);for(let A=0;A<t;A++)s[A]=e.charCodeAt(A);return s}}function fA(A,e,t,s){const n=A.length,i=new Uint8ClampedArray(4*n);let r=0;for(let o=0;o<n;o++)i[r++]=A[o],i[r++]=e[o],i[r++]=t[o],i[r++]=s[o];return i}function QA(A){const e=new Float32Array(5120);for(let A=0;A<256;A++)for(let t=0;t<5;t++)e[4*(256*t+A)+t]=1;if(A)for(let t=0;t<A.length;t++){const{rgbaTransform:s}=A[t];for(let A=0;A<5;A++)for(let n=0;n<4;n++)e[4*(256*A+t)+n]=s[A+5*n]}return e}class EA{scene;config;changedCB;root;meshes;objectHighlightPixels;objectHighlightImage;colorMatricesImage;elevationImageData;elevationImage;deviationImageData;deviationImage;intensityImageData;intensityImage;materials;prevElevationColors;prevDeviationColors;prevIntensityColors;prevHighlights=[];prevHighlightIndices;constructor(A,e,t,s,n,i){this.scene=A,this.config=e,this.changedCB=i;const{renderContext:r}=A;this.root=new mA("",255,t);const o={},[a,w]=function(A){const e=Math.min(A,4096);return[e,Math.ceil(A/e)]}(e.numObjects);{const A={type:5121,internalFormat:6409,format:6409,width:a,height:w,generateMipmaps:!1,transferBuffer:!1};this.objectHighlightPixels=new Uint8Array(a*w),this.objectHighlightImage=r.createImageFromBuffer(this.objectHighlightPixels,A),o.object_info=r.createTexture(this.objectHighlightImage)}{const A={type:5126,internalFormat:34836,format:6408,width:256,height:5,generateMipmaps:!1,transferBuffer:!0};this.colorMatricesImage=r.createImageFromBuffer(QA(),A),o.color_matrix=r.createTexture(this.colorMatricesImage)}this.elevationImageData=new ImageData(1024,1),this.elevationImage=r.createImage(this.elevationImageData,{generateMipmaps:!1});const B=r.createTexture(this.elevationImage);o.elevation=B,this.deviationImageData=new ImageData(1024,1),this.deviationImage=r.createImage(this.deviationImageData,{generateMipmaps:!1});const I=r.createTexture(this.deviationImage);o.deviation=I,this.intensityImageData=new ImageData(1024,1),this.intensityImage=r.createImage(this.intensityImageData,{generateMipmaps:!1});const C=r.createTexture(this.intensityImage);if(o.intensity=C,e.materialProperties){const A=function(A,e){const t=A;function s(){return new Uint8ClampedArray(A)}function n(){const e=new Uint8ClampedArray(A);return e.fill(255),e}const i={red:DA(e.diffuse?.red)??n(),green:DA(e.diffuse?.green)??n(),blue:DA(e.diffuse?.blue)??n()},r=DA(e.opacity)??n(),o={red:DA(e.specular?.red)??s(),green:DA(e.specular?.green)??s(),blue:DA(e.specular?.blue)??s()},a=DA(e.shininess)??s(),w=fA(i.red,i.green,i.blue,r),B=fA(o.red,o.green,o.blue,a),I=new Uint8ClampedArray(2*t*4);return I.set(w,0*t*4),I.set(B,1*t*4),new ImageData(I,t,2)}(e.numMaterials,e.materialProperties);o.material_properties=r.createTexture(r.createImage(A,{generateMipmaps:!1,format:6408}))}else if(A.materials&&A.materials.length){const e=A.materials[0].textures;e&&(o.material_properties=e["diffuse+opacity"])}const c={numMaterials:e.numMaterials,objectInfoTextureSize:[a,w]},g=[r.createMaterial("octree",c,o),r.createMaterial("octree_a",c,o),r.createMaterial("pointcloud",c,o),r.createMaterial("octree_terrain",c,o),r.createMaterial("octree_ds",c,o),r.createMaterial("octree_ds_a",c,o),r.createMaterial("pointcloud_deviation",c,o),r.createMaterial("lines",c,o),r.createMaterial("pointcloud_intensity",c,o),r.createMaterial("pointcloud_deviation_intensity",c,o),r.createMaterial("octree_albedo",c,o),r.createMaterial("octree_document",c,o),r.createMaterial("pointcloud_deviation2",c,o),r.createMaterial("pointcloud_deviation2_intensity",c,o)];this.materials=g,this.meshes=uA(t,s,r,n,g,!0)}async getLeaves(){const{downloader:A}=this.scene,e=new Set;return hA(e,new Uint8Array(await A.downloadArrayBuffer("octree"))),e}dispose(){const{root:A}=this;A.dispose()}setObjectHighlights(A){const e=this.objectHighlightPixels,t=new Uint8Array(A),{numObjects:s}=this.config;for(let A=0;A<s;A++)e[A]=t[A]}setElevationColors(A){const e=this.elevationImageData.data,t=A.length,s=A[0].elevation,n=A[t-1].elevation;let i=0;const r=y();z(r,A[0].color);for(let o=0;o<1024;o++){const a=(o+.5)/1024*(n-s)+s;for(let e=i;e<t-1;e++){i=e;const{elevation:t,color:s}=A[e],{elevation:n,color:o}=A[e+1];if(a>=t&&a<n){K(r,s,o,(a-t)/(n-t));break}}const[w,B,I]=r;e[4*o+0]=255*w,e[4*o+1]=255*B,e[4*o+2]=255*I,e[4*o+3]=255}}setDeviationColors(A){const e=this.deviationImageData.data,t=A.length,s=A[0].deviation,n=A[t-1].deviation;let i=0;const r=P();V(r,A[0].color);for(let o=0;o<1024;o++){const a=(o+.5)/1024*(n-s)+s;for(let e=i;e<t-1;e++){i=e;const{deviation:t,color:s}=A[e],{deviation:n,color:o}=A[e+1];if(a>=t&&a<n){X(r,s,o,(a-t)/(n-t));break}}const[w,B,I,C]=r;e[4*o+0]=255*w,e[4*o+1]=255*B,e[4*o+2]=255*I,e[4*o+3]=255*C}}setIntensityColors(A){const e=this.intensityImageData.data,t=A.length,s=A[0].intensity,n=A[t-1].intensity;let i=0;const r=P();V(r,A[0].color);for(let o=0;o<1024;o++){const a=(o+.5)/1024*(n-s)+s;for(let e=i;e<t-1;e++){i=e;const{intensity:t,color:s}=A[e],{intensity:n,color:o}=A[e+1];if(a>=t&&a<n){X(r,s,o,(a-t)/(n-t));break}}const[w,B,I,C]=r;e[4*o+0]=255*w,e[4*o+1]=255*B,e[4*o+2]=255*I,e[4*o+3]=255*C}}update(A,e,t,s){const{root:n,scene:i}=this,{downloader:r,renderContext:o}=i,{viewFrustum:a,viewClipMatrix:w,projection:B}=A,{left:I,right:C,top:c,bottom:g,near:l,far:b,image:d}=a,h=[I,C,c,g,l,b],{showBoundingBoxes:u,maxQueueSize:m}=t.diagnostics,{elevationColors:D}=t.terrain??{},{colors:f}=t.points.deviation,{colors:Q}=t.points.intensity;let E=1/(t.quality.detail.value*s.detailBias);const T=t.advanced.terrainBiasLimit+5,M=t.advanced.documentsBiasLimit+5,v=s.gpuBytesLimit,p=s.triangleLimit,{prevElevationColors:y,prevDeviationColors:F,prevIntensityColors:U}=this,{objectHighlights:z}=t;if(!rA(z,this.prevHighlights)){this.prevHighlights=z;const G=QA(z);this.colorMatricesImage.update(G)}const x=e?new Uint8Array(e):this.prevHighlightIndices;if(e&&(this.prevHighlightIndices=x,this.setObjectHighlights(x),this.objectHighlightImage.update(this.objectHighlightPixels)),!rA(D,y)){this.prevElevationColors=D;let Y=1,P=-1;D&&D.length>0&&(this.setElevationColors(D),this.elevationImage.update(this.elevationImageData),Y=D[0].elevation,P=D[D.length-1].elevation),this.materials[3].updateUniforms({elevationRangeMin:Y,elevationRangeMax:P})}if(!rA(f,F)){this.prevDeviationColors=f;let R=1,V=-1;f&&f.length>0&&(this.setDeviationColors(f),this.deviationImage.update(this.deviationImageData),R=f[0].deviation,V=f[f.length-1].deviation),this.materials[6].updateUniforms({deviationRangeMin:R,deviationRangeMax:V}),this.materials[9].updateUniforms({deviationRangeMin:R,deviationRangeMax:V}),this.materials[12].updateUniforms({deviationRangeMin:R,deviationRangeMax:V}),this.materials[13].updateUniforms({deviationRangeMin:R,deviationRangeMax:V})}if(!rA(Q,U)){this.prevIntensityColors=Q;let W=1,X=-1;Q&&Q.length>0&&(this.setIntensityColors(Q),this.intensityImage.update(this.intensityImageData),W=Q[0].intensity,X=Q[Q.length-1].intensity),this.materials[8].updateUniforms({intensityRangeMin:W,intensityRangeMax:X}),this.materials[9].updateUniforms({intensityRangeMin:W,intensityRangeMax:X})}const{subtrees:L}=this.config;let j="-",J="-";!function A(e,s=2){const{ids:n}=e.data;if(n.length>0&&x&&n.every((A=>255==x[A])))return void(e.visibility=1);e.update(B,h,d,w,s),e instanceof mA&&1===e.id.length&&L&&L.length>1&&("points"===L[+e.id]?t.advanced.hidePoints&&(e.visibility=1):"lines"===L[+e.id]?t.advanced.hideLines&&(e.visibility=1):"terrain"===L[+e.id]?(j=e.id,t.advanced.hideTerrain&&(e.visibility=1)):"documents"===L[+e.id]?(J=e.id,t.advanced.hideDocuments&&(e.visibility=1)):t.advanced.hideTriangles&&(e.visibility=1));const{visibility:i,children:r}=e;if(r)for(const e of r)A(e,i)}(n);let H=[];do{function Z(A){A.markedForCollapse=!1;let e=E;if(A.id[0]===j?T>E&&(e=T):A.id[0]===J&&M>E&&(e=M),A.shouldSplit(e))if(0!=A.children.length)for(const e of A.children)Z(e);else A.isLeaf||0!=A.state||A.split();else A.shouldSplit(.98*e)||0!=A.children.length&&(A.markedForCollapse=!0)}function q(A){if(!A.markedForCollapse&&(H.push(A),A.children))for(const e of A.children)q(e)}H=[],Z(n),q(n),E/=2}while(H.length<4&&E>.05);!function A(e){if(e.markedForCollapse)e.collapse();else if(e.children)for(const t of e.children)A(t)}(n),H.sort(((A,e)=>e.projectedSize-A.projectedSize));{let _=0,$=0;for(const AA of H)_+=AA.gpuBytes,$+=AA.renderedTriangles;for(let eA=0;eA<H.length;eA++){const tA=H[eA];1!=tA.state&&2!=tA.state||(_+=tA.childrenGPUBytes,$+=tA.childrenTriangles,(_>v||$>p)&&(tA.collapse(),_-=tA.childrenGPUBytes,$-=tA.childrenTriangles))}}let O=0,K=0;for(let sA=0;sA<H.length;sA++){const nA=H[sA];O+=nA.gpuBytes,K+=nA.renderedTriangles,(O>v||K>p)&&(nA.dispose(),H.splice(sA--,1),O-=nA.gpuBytes,K-=nA.renderedTriangles)}const S=3!=n.state;for(const iA of this.meshes)iA.update({visible:S,uniforms:{...iA.uniforms,octantMask:255}});for(const oA of H)oA.render(u);let N=!1;for(const aA of H.filter((A=>1==A.state))){if(r.activeDownloads>=m)break;N=!0;const wA=r.downloadArrayBufferAbortable(aA.path);aA.beginDownload(wA),wA.result.then((A=>{if(A){aA.endDownload(this.config.version,o,A,s,this.materials);const{changedCB:e}=this;e?.()}}),(A=>{A.name}))}const k=H.every((A=>3==A.state||0==A.state));return{triangles:K,gpuBytes:O,resolved:!N&&k}}}var TA;(TA||(TA={})).create=async function(A,e,t,s){const n=await A.downloader.downloadArrayBuffer("root"),{offset:i,version:r}=e,{children:o,geometry:a}=bA(r,1,n,i);return new EA(A,e,o[0],a,t,s)};class MA{scene;aabb;boundingSphere;transform=D();meshes=[];modelWorldMatrix=D();constructor(A,e,t,s,n,i,r){this.scene=A,this.aabb=i,this.boundingSphere=r;const{renderContext:o}=A,a=e.map((A=>o.createImage(A,{noTransfer:!0}))),w=t.map((A=>o.createTexture(a[A.image],A.sampler?{sampler:A.sampler}:void 0))),B=s.map((A=>{const{kind:e,uniforms:t}=A,s=A.textures,n={};for(let A in s){const e=s[A];void 0!==e&&(n[A]=w[e])}return o.createMaterial(e,t,n)}));this.meshes=n.map((A=>{const{material:e,indices:t,vertices:s,renderMode:n,transform:i}=A;return o.createMesh(B[e],!0,n,s,t,void 0,i,void 0,{noTransfer:!0})}))}updateFromInstance(A){if(A){const{visible:E,position:T,rotation:M,scale:v}=A,{modelWorldMatrix:p}=this;e=p,s=T,n=v,i=(t=M)[0],C=i*(w=i+i),c=i*(B=(r=t[1])+r),g=i*(I=(o=t[2])+o),l=r*B,b=r*I,d=o*I,h=(a=t[3])*w,u=a*B,m=a*I,D=n[0],f=n[1],Q=n[2],e[0]=(1-(l+d))*D,e[1]=(c+m)*D,e[2]=(g-u)*D,e[3]=0,e[4]=(c-m)*f,e[5]=(1-(C+d))*f,e[6]=(b+h)*f,e[7]=0,e[8]=(g+u)*Q,e[9]=(b-h)*Q,e[10]=(1-(C+l))*Q,e[11]=0,e[12]=s[0],e[13]=s[1],e[14]=s[2],e[15]=1;for(const A of this.meshes)A.update({visible:E,modelWorldMatrix:p})}var e,t,s,n,i,r,o,a,w,B,I,C,c,g,l,b,d,h,u,m,D,f,Q}update(A,e,t,s){}async dispose(){for(const A of this.meshes)A.delete();this.meshes.length=0}}const vA={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pA={5120:1/255,5121:1/127,5122:1/32767,5123:1/65535,5125:1,5126:1},yA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function FA(A,e,t,s){let n=e;for(let e=t.next();!e.done;e=t.next()){const i=t.next(),r=tA(e.value,i.value);s?.(r),A[n++]=r}}function UA(A,e,t,s){let n=e;for(let e=t.next();!e.done;e=t.next()){const i=t.next(),r=t.next(),o=U(e.value,i.value,r.value);s?.(o),A[n++]=o}}function zA(A,e,t,s=4){let n=e;const i=[1,1,1,1];for(let e=t.next();!e.done;e=t.next()){i[0]=e.value;for(let A=1;A<s;A++)i[A]=t.next().value;const r=R(i[0],i[1],i[2],i[3]);A[n++]=r}}class xA{buffer;byteOffset;byteLength;byteStride;static fromJson(A,e){const{buffer:t,byteOffset:s,byteLength:n,byteStride:i}=e;return new xA(A[t],s??0,n,i)}constructor(A,e,t,s){this.buffer=A,this.byteOffset=e,this.byteLength=t,this.byteStride=s}}class LA{bufferView;byteOffset;componentType;normalized;count;type;min;max;view;numComponents;offset;stride;scale;static fromJson(A,e){const{bufferView:t,byteOffset:s,componentType:n,max:i,min:r,normalized:o,count:a,type:w,sparse:B}=e;return new LA(void 0===t?void 0:A[t],s??0,n,o??!1,a,w,r,i)}constructor(A,e,t,s,n,i,r,o){this.bufferView=A,this.byteOffset=e,this.componentType=t,this.normalized=s,this.count=n,this.type=i,this.min=r,this.max=o;const a=vA[t];this.view=A?new a(A.buffer):void 0;const w=vA[t].BYTES_PER_ELEMENT,B=yA[i],I=A?.byteStride??w*B;this.numComponents=B,this.offset=(e+(A?.byteOffset??0))/w,this.stride=I/w,this.scale=s?pA[t]:1}*iterate(){const{view:A,count:e,offset:t,stride:s,numComponents:n,scale:i}=this;for(let r=0;r<e;r++)for(let e=0;e<n;e++)yield(A?.[t+r*s+e]??0)*i}}class jA{material;vertexLayout;hasIndices;renderMode;bounds;indices;positions=[];normals=[];tangents=[];texcoords0=[];texcoords1=[];colors0_3=[];colors0_4=[];constructor(A,e,t,s){this.material=A,this.vertexLayout=e,this.hasIndices=t,this.renderMode=s,t&&(this.indices=[])}get numVertices(){return this.positions.length}addBounds(A){this.bounds?(J(this.bounds.min,this.bounds.min,A.min),H(this.bounds.max,this.bounds.max,A.max)):this.bounds={min:A.min,max:A.max}}addIndices(A,e){for(const t of A)this.indices.push(t+e)}setPositions(A,e,t){UA(this.positions,e,A,(A=>{S(A,A,t)}))}setNormals(A,e,t){UA(this.normals,e,A,(A=>{N(A,A,t)}))}setTangents(A,e){zA(this.tangents,e,A)}setTexcoords0(A,e){FA(this.texcoords0,e,A)}setTexcoords1(A,e){FA(this.texcoords1,e,A)}setColors0(A,e,t){3==t?UA(this.colors0_3,e,A):zA(this.colors0_4,e,A)}}function JA(A,e){const{meshes:t}=A;let s;if(t)for(const A of t)for(const t of A.primitives)if((t.material??0)==e){const A=t.mode??4;A!==s&&(null==s?s=t.mode:4!==A&&(s=4))}return s??4}class HA{material;transform;renderMode;positions;normals;tangents;texcoords0;texcoords1;color0;indices;bounds;constructor(A,e,t,s,n,i,r,o,a,w){this.material=A,this.transform=e,this.renderMode=t,this.positions=s,this.normals=n,this.tangents=i,this.texcoords0=r,this.texcoords1=o,this.color0=a,this.indices=w;const{min:B,max:I}=s;if(!B||!I)throw new Error("Positions has no min max values!");this.bounds={min:U(B[0],B[1],B[2]),max:U(I[0],I[1],I[2])}}*getCorners(){const{min:A,max:e}=this.bounds;yield U(A[0],A[1],A[2]),yield U(e[0],A[1],A[2]),yield U(A[0],e[1],A[2]),yield U(e[0],e[1],e[2]),yield U(A[0],A[1],e[2]),yield U(e[0],e[1],e[2]),yield U(A[0],e[1],e[2])}get worldSpaceBounds(){const A=U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e=U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(const t of this.getCorners())S(t,t,this.transform),J(A,A,t),H(e,e,t);return{min:A,max:e}}addToGroup(A,e){const t=u();m(t,e);const s=A.numVertices,{positions:n,normals:i,tangents:r,texcoords0:o,texcoords1:a,color0:w,indices:B}=this;if(A.setPositions(n.iterate(),s,e),i&&A.setNormals(i.iterate(),s,t),r&&A.setTangents(r.iterate(),s),o&&A.setTexcoords0(o.iterate(),s),a&&A.setTexcoords1(a.iterate(),s),w&&A.setColors0(w.iterate(),s,w.numComponents),void 0!==B)A.addIndices(B.iterate(),s);else if(A.hasIndices){const e=n.count;A.addIndices(function*(){for(let A=0;A<e;A++)yield A}(),s)}}}class OA{buffers;gltf;groups;accessors;meshPrimitives=[];constructor(A,e,t){this.buffers=A,this.gltf=e,this.groups=t.map(((A,t)=>new jA(t,A,function(A,e){return A.meshes?.some((A=>A.primitives.some((A=>(A.material??0)==e&&void 0!==A.indices))))??!1}(e,t),JA(e,t))));const s=(e.bufferViews??[]).map((e=>xA.fromJson(A,e)));this.accessors=(e.accessors??[]).map((A=>LA.fromJson(s,A)));const n=e.scenes?.[e.scene??0];if(n){const{nodes:A}=n;if(A)for(const e of A)this.addNode(e)}}addNode(A,e){const{gltf:t,accessors:s,groups:n}=this,i=t.nodes?.[A];if(void 0!==i){const A=function(A){const{matrix:e,translation:t,rotation:s}=A,n=D();if(e)!function(A,e,t,s,n,i,r,o,a,w,B,I,C,c,g,l,b){A[0]=e,A[1]=t,A[2]=s,A[3]=n,A[4]=i,A[5]=r,A[6]=o,A[7]=a,A[8]=w,A[9]=B,A[10]=I,A[11]=C,A[12]=c,A[13]=g,A[14]=l,A[15]=b}(n,...e);else if(t||s){const A=t?U(...t):y();!function(A,e,t){var s=e[0],n=e[1],i=e[2],r=e[3],o=s+s,a=n+n,w=i+i,B=s*o,I=s*a,C=s*w,c=n*a,g=n*w,l=i*w,b=r*o,d=r*a,h=r*w;A[0]=1-(c+l),A[1]=I+h,A[2]=C-d,A[3]=0,A[4]=I-h,A[5]=1-(B+l),A[6]=g+b,A[7]=0,A[8]=C+d,A[9]=g-b,A[10]=1-(B+c),A[11]=0,A[12]=t[0],A[13]=t[1],A[14]=t[2],A[15]=1}(n,s?eA(...s):Z(),A)}return n}(i);e&&p(A,e,A);const r=i.mesh;if(void 0!==r){const e=t.meshes?.[r];if(e){const{primitives:i}=e;for(const e of i){const{indices:i,mode:r,material:o}=e,a=n[o??0];if((r??4)!==a.renderMode)continue;const w=(A,n)=>{const i=e.attributes[A];if(void 0!==i)return t.accessors[i],s[i]},B=new HA(o,A,r,w("POSITION","VEC3"),w("NORMAL","VEC3"),w("TANGENT","VEC4"),w("TEXCOORD_0","VEC2"),w("TEXCOORD_1","VEC2"),w("COLOR_0",["VEC3","VEC4"]),void 0!==i?s[i]:void 0);this.meshPrimitives.push(B);const{worldSpaceBounds:I}=B;a.addBounds(I)}}}const{children:o}=i;if(o)for(const e of o)this.addNode(e,A)}}computeAABB(){const{groups:A}=this,e=U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t=U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);let s=A.length>0;for(const n of A)n.bounds?(J(e,e,n.bounds.min),H(t,t,n.bounds.max)):s=!1;return s?{min:e,max:t}:void 0}computeBoundingSphere(){const{groups:A}=this;function*e(){for(const e of A)yield*e.positions}const t={x:U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),y:U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),z:U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},s={x:U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),y:U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),z:U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)};for(const A of e()){const[e,n,i]=A;e<t.x[0]&&x(t.x,e,n,i),e>s.x[0]&&x(s.x,e,n,i),n<t.y[1]&&x(t.y,e,n,i),n>s.y[1]&&x(s.y,e,n,i),i<t.z[2]&&x(t.z,e,n,i),i>s.z[2]&&x(s.z,e,n,i)}const n={x:y(),y:y(),z:y()};j(n.x,s.x,t.x),j(n.y,s.y,t.y),j(n.z,s.z,t.z);const i={x:Y(n.x),y:Y(n.y),z:Y(n.z)};let r;r=i.x>i.y&&i.x>i.z?"x":i.y>i.z?"y":"z";const o=y();L(o,s[r],t[r]),O(o,o,.5);let a=.5*i[r];const w=y();for(const A of e()){j(w,A,o);const e=F(w);e>a&&(a=.5*(a+e),O(w,w,1-a/e),L(o,o,w))}return{center:o,radius:a}}*buildStaticGeometry(A){for(const{material:e,vertexLayout:t,numVertices:s,indices:n,positions:i,normals:r,tangents:o,texcoords0:a,texcoords1:w,colors0_3:B,colors0_4:I,renderMode:C,bounds:c}of this.groups){const c=new nA(i.length,t),g=c.set(0),l=c.set(1),b=c.set(2),d=c.set(4),h=c.set(5),u=c.set(12),m=[1,1,1,1];for(let A=0;A<s;A++)g(A,i[A]),r.length&&l(A,r[A]),o.length&&b(A,o[A]),a.length&&d(A,a[A]),w.length&&h(A,w[A]),B.length?u(A,B[A]):I.length?u(A,I[A]):u(A,m);yield{material:e,renderMode:C,transform:A,indices:null==n?s:s<65536?new Uint16Array(n):new Uint32Array(n),vertices:c.view.buffer}}}}async function KA(A,e,t){const{gltf:s,buffers:n,externalImageBlobs:i}=await async function(A,e){const t=A.pathname.toLowerCase();let s,n;if(t.endsWith(".gltf")){s=await e.downloadJson(A.toString());const t=(s.buffers??[]).map((async t=>{const s=new URL(t.uri,A);return s.search||(s.search=A.search??""),e.downloadArrayBuffer(s.toString())}));n=await Promise.all(t)}else{if(!t.endsWith(".glb"))throw new Error(`Uknown GLTF file extention: "${A}"!`);{const t=await e.downloadArrayBuffer(A.toString()),{json:i,buffer:r}=function(A){const e=new DataView(A,0,12),t=new TextDecoder,s=t.decode(new Uint8Array(A,0,4)),n=e.getUint32(4,!0);if(e.getUint32(8,!0),"glTF"!==s)throw new Error("Unsupported glTF-Binary header.");if(n<2)throw new Error("Unsupported legacy gltf file detected.");let i,r;const o=new DataView(A,12);let a=0;for(;a<o.byteLength;){const e=o.getUint32(a,!0);a+=4;const s=o.getUint32(a,!0);if(a+=4,1313821514===s){const s=new Uint8Array(A,12+a,e);i=t.decode(s),i=i.substr(0,i.lastIndexOf("}")+1)}else if(5130562===s){const t=new Uint8Array(A,12+a,e),s=new Uint8Array(e);s.set(t),r=s.buffer}a+=e}if(!i)throw new Error("glTF-Binary: JSON content not found.");if(!r)throw new Error("glTF-Binary: Binary chunk not found.");return{json:i,buffer:r}}(t);s=JSON.parse(i),n=[r]}}const i=s.images?.map((t=>{if(t.uri){const s=new URL(t.uri,A);return e.downloadBlob(s.toString())}}))??[];return{gltf:s,buffers:n,externalImageBlobs:await Promise.all(i)}}(A,e),{images:r,textures:o,materials:a,meshes:w,aabb:B,boundingSphere:I}=function(A,e,t,s){const{extensionsRequired:n,extensionsUsed:i}=e;if(i&&0!=i.length&&i[0],n&&0!=n.length&&"KHR_materials_unlit"!=n[0])throw new Error(`The following glTF extensions were required, but are not supported: ${n.join(", ")}!`);const r={kind:"gltf",uniforms:{alphaCutoff:.5,baseColorFactor:[1,1,1,1],baseColorUVSet:-1,roughnessFactor:1,metallicFactor:1,metallicRoughnessUVSet:-1,normalScale:1,normalUVSet:-1,occlusionStrength:1,occlusionUVSet:-1,emissiveFactor:[0,0,0],emissiveUVSet:-1}},o=e.images?.map(((s,n)=>{let i=t[n]??function(t){const s=e.bufferViews[t.bufferView],n=s.byteOffset??0,i=s.byteLength?n+s.byteLength:void 0,r=A[s.buffer].slice(n,i);return new Blob([r])}(s);return s.mimeType&&(i=new Blob([i],{type:s.mimeType})),i}))??[],a=e.samplers?.map((A=>{const{magFilter:e,minFilter:t,wrapS:s,wrapT:n}=A;return{10240:e??9728,10241:t??9728,10242:s??10497,10243:n??10497}}))??[],w=e.textures?.map((A=>({image:A.source,sampler:a[A.sampler]})))??[],B=e.materials?e.materials.map(((A,t)=>{const s=JA(e,t),{pbrMetallicRoughness:n,normalTexture:i,occlusionTexture:o,emissiveTexture:a,emissiveFactor:w,alphaMode:B,alphaCutoff:I,doubleSided:C}=A,c=A.extensions&&"KHR_materials_unlit"in A.extensions;return{kind:0==s?"gltf_p":"BLEND"==B?c?"gltf_unlit_t":"gltf_t":c?"gltf_unlit":"gltf",uniforms:{alphaCutoff:"OPAQUE"==B||"BLEND"==B?0:I??r.uniforms.alphaCutoff,baseColorFactor:n?.baseColorFactor??r.uniforms.baseColorFactor,baseColorUVSet:n?.baseColorTexture?n.baseColorTexture.texCoord??0:r.uniforms.baseColorUVSet,roughnessFactor:n?.roughnessFactor??r.uniforms.roughnessFactor,metallicFactor:n?.metallicFactor??r.uniforms.metallicFactor,metallicRoughnessUVSet:n?.metallicRoughnessTexture?n.metallicRoughnessTexture.texCoord??0:r.uniforms.metallicRoughnessUVSet,normalScale:i?.scale??r.uniforms.normalScale,normalUVSet:i?i.texCoord??0:r.uniforms.normalUVSet,occlusionStrength:o?.strength??r.uniforms.occlusionStrength,occlusionUVSet:o?o.texCoord??0:r.uniforms.occlusionUVSet,emissiveFactor:w??r.uniforms.emissiveFactor,emissiveUVSet:a?a.texCoord??0:r.uniforms.emissiveUVSet},textures:{albedo:n?.baseColorTexture?.index,"metallic+roughness":n?.metallicRoughnessTexture?.index,normal:i?.index,occlusion:o?.index,emissive:a?.index}}})):[r],I=B.map((A=>s(A.kind))),C=[],c=e.scenes?.[e.scene??0],g={center:y(),radius:0};let l;if(void 0!==c){const t=new OA(A,e,I);l=t.computeAABB();const s=y();l&&(L(s,l.min,l.max),O(s,s,.5));const n=D(),i=D();E(i,s);const r=y();d=s,(b=r)[0]=-d[0],b[1]=-d[1],b[2]=-d[2];for(const A of t.meshPrimitives){Q(n,A.transform,r);const e=t.groups[A.material??0];A.addToGroup(e,n)}const{center:o,radius:a}=t.computeBoundingSphere();L(o,o,s),z(g.center,o),g.radius=a,C.push(...t.buildStaticGeometry(i))}var b,d;return{images:o,textures:w,materials:B,meshes:C,aabb:l,boundingSphere:g}}(n,s,i,(A=>t[A].contextData.vertexLayout)),C=r.map((A=>e.createImageFromBlob(A))),c=await Promise.all(C);return new SA(c,o,a,w,B,I,A)}class SA{images;textures;materials;meshes;aabb;boundingSphere;url;constructor(A,e,t,s,n,i,r){this.images=A,this.textures=e,this.materials=t,this.meshes=s,this.aabb=n,this.boundingSphere=i,this.url=r}createGeometry(A){return new MA(A,this.images,this.textures,this.materials,this.meshes,this.aabb,this.boundingSphere)}}class NA{materialTypes;assetUrl;assets=[];environments=[];downloader;constructor(A,e){this.materialTypes=A,this.assetUrl=e,this.downloader=new aA(e?new URL(e):void 0)}async newId(){const A=this.assets.length;return this.assets[A]=void 0,A}async loadAsset(A,e){const t=await KA(new URL(e),this.downloader,this.materialTypes);return this.assets[A]=t,t.boundingSphere}async disposeAsset(A){this.assets[A]=void 0}async loadEnvironment(A,e){const t=await async function(A,e,t){const s=[`${e}/background.ktx`,`${e}/irradiance.ktx`,`${e}/radiance.ktx`,new URL("./lut_ggx.ktx",e).toString()].map((async A=>await t.downloadArrayBuffer(A))),[n,i,r,o]=await Promise.all(s);return{id:A,background:n,irradiance:i,radiance:r,lut:o}}(A,e,this.downloader);this.environments[A]=t}async disposeEnvironment(A){this.environments[A]=void 0}}var kA;(kA||(kA={})).create=async function(A,e){return(await KA(new URL(e.url,A.downloader.baseUrl),A.downloader,A.renderContext.materialTypes)).createGeometry(A)};const GA=new Uint8Array([171,75,84,88,32,49,49,187,13,10,26,10]);function*YA(A,e){const t=A.glFormat,s=A.glInternalFormat,n=A.glType,i=A.glBaseInternalFormat,r=Math.max(1,A.numberOfMipmapLevels),o=Math.max(1,A.numberOfArrayElements),a=A.numberOfFaces,w=Math.max(1,A.pixelDepth);let B=64+A.bytesOfKeyValueData;const I=6==a&&0==A.numberOfArrayElements?1:o*a*w;for(let C=0;C<r;C++){const r=A.pixelWidth>>C,c=A.pixelHeight>>C,g=new Int32Array(e,B,1)[0];B+=4;const l=g/I;for(let A=0;A<o;A++)for(let A=0;A<a;A++)for(let e=0;e<w;e++){const e=B;B+=l;const o={kind:"uncompressed",format:t,internalFormat:s,type:n,target:6==a?34069+A:3553,level:C,width:r,height:c,blobRange:[e,B],baseInternalFormat:i};yield o}}}function PA(A){const e=function(A){const e=new DataView(A,0,12);for(let A=0;A<GA.length;A++)if(e.getUint8(A)!=GA[A])throw new Error("texture missing KTX identifier");const t=Uint32Array.BYTES_PER_ELEMENT,s=new DataView(A,12,13*t),n=67305985===s.getUint32(0,!0);return{glType:s.getUint32(1*t,n),glTypeSize:s.getUint32(2*t,n),glFormat:s.getUint32(3*t,n),glInternalFormat:s.getUint32(4*t,n),glBaseInternalFormat:s.getUint32(5*t,n),pixelWidth:s.getUint32(6*t,n),pixelHeight:s.getUint32(7*t,n),pixelDepth:s.getUint32(8*t,n),numberOfArrayElements:s.getUint32(9*t,n),numberOfFaces:s.getUint32(10*t,n),numberOfMipmapLevels:s.getUint32(11*t,n),bytesOfKeyValueData:s.getUint32(12*t,n)}}(A);return{target:6==e.numberOfFaces?34067:3553,images:[...YA(e,A)]}}function RA(A){const e={};if(A)for(const t in A){const s=A[t]?.textureIndex;e[t]=s}return e}class VA{commands=[];transferables=[];createTextures(A,e,t,s){this.commands.push({name:"createTextures",args:[A,e,t,s]}),s?.transferData&&this.transferables.push(t)}createImage(A,e,t){this.commands.push({name:"createImage",args:[A,e,t]}),!t?.noTransfer&&"ImageBitmap"in self&&e instanceof ImageBitmap&&this.transferables.push(e)}createImageFromBuffer(A,e,t){this.commands.push({name:"createImageFromBuffer",args:[A,e,t]}),t.transferBuffer&&this.transferables.push(e)}createTexture(A,e,t){this.commands.push({name:"createTexture",args:[A,e,t]}),"ImageBitmap"in self&&e instanceof ImageBitmap&&this.transferables.push(e)}deleteTexture(A){this.commands.push({name:"deleteTexture",args:[A]})}createMaterial(A,e,t,s){this.commands.push({name:"createMaterial",args:[A,e,t,s]})}setSceneUniforms(A){this.commands.push({name:"setSceneUniforms",args:[A]})}setSceneTextures(A){this.commands.push({name:"setSceneTextures",args:[A]})}createMesh(A,e,t,s){this.commands.push({name:"createMesh",args:[A,e,t]}),s?.noTransfer||(this.transferables.push(t.vertexBuffer),t.indexBuffer&&this.transferables.push(t.indexBuffer))}updateMesh(A,e,t){this.commands.push({name:"updateMesh",args:[A,e,t]})}deleteMesh(A,e){this.commands.push({name:"deleteMesh",args:[A,e]})}updateMaterial(A,e,t){this.commands.push({name:"updateMaterial",args:[A,e,t]})}updateImage(A,e,t){this.commands.push({name:"updateImage",args:[A,e,t]})}commit(){const A=[...this.commands],e=[...this.transferables];return this.commands.length=0,this.transferables.length=0,{commands:A,transferables:e}}}class WA{view;extensions;materialTypes;compressionType="none";images=new Set;textures=new Set;emptyTextureSlots=[];materials=new Set;meshes=new Set;_nextMeshId=1;_sceneUniforms={};_sceneTextures={};commands=new VA;constructor(A,e,t){this.view=A,this.extensions=e,this.materialTypes=t;const s=[];for(const A of s)if(e[`WEBGL_compressed_texture_${A}`]){this.compressionType=A;break}}get hasChanges(){return 0!=this.commands.commands.length}async loadEnvironmentTextures(A,e,t){const s=[`${A}/background.ktx`,`${A}/irradiance.ktx`,`${A}/radiance.ktx`,`${A}/../lut_ggx.ktx`].map((async A=>{const t=await e.downloadArrayBuffer(A),s=PA(t);return this.createTextures([s],t)[0]})),[n,i,r,o]=await Promise.all(s);return{background:n,irradiance:i,radiance:r,lut:o}}createEnvironmentTextures(A){const e=A=>{const e=PA(A);return this.createTextures([e],A)[0]};return{background:e(A.background),irradiance:e(A.irradiance),radiance:e(A.radiance),lut:e(A.lut)}}deleteTexture(A){this.commands.deleteTexture(A.textureIndex),this.textures.delete(A),this.emptyTextureSlots.push(A.textureIndex)}_nextTextureIndex=0;getTextureIndex(){return this.emptyTextureSlots.pop()??this._nextTextureIndex++}createTextures(A,e,t){let s=this._nextTextureIndex;return A.length>1?this._nextTextureIndex+=A.length:s=this.getTextureIndex(),this.commands.createTextures(s,A,e,t),A.map(((A,e)=>(A.target,new ZA(this,s+e))))}createImage(A,e){const t=this.images.size;this.commands.createImage(t,A,e);const{width:s,height:n}=A,{generateMipmaps:i}=e??{};return new XA(this,t,"2d",{width:s,height:n,generateMipmaps:i})}createImageFromBuffer(A,e){const t=this.images.size;return this.commands.createImageFromBuffer(t,A.buffer,e),new XA(this,t,"2d",e)}createTexture(A,e){const t=this.getTextureIndex();return this.commands.createTexture(t,A.imageIndex,e),new ZA(this,t,A,e)}createMaterial(A,e,t){const s=this.materials.size,n=this.materialTypes[A].contextData.vertexLayout,i=RA(t);return this.commands.createMaterial(s,A,e,i),new qA(this,n,s,A,e??{},t??{})}createMesh(A,e,t,s,n,i,r,o,a){const w="number"==typeof n?void 0:2==n.BYTES_PER_ELEMENT?5123:5125,B="number"==typeof n?n:n.length,I="number"==typeof n?void 0:n.buffer,C=this._nextMeshId++,c=i?.map((A=>{const{data:e,semantic:t,transform:s}=A,n=PA(e);return{semantic:t,transform:s,texture:this.createTextures([n],e)[0]}}))??[],{vertexLayout:g}=A,l={visible:e,primitiveType:t,indexCount:B,indexBufferType:w,vertexLayout:g,vertexBuffer:s,indexBuffer:I,textures:c.map((A=>({textureIndex:A.texture.textureIndex,semantics:A.semantic,transform:A.transform}))),modelWorldMatrix:r,sortCoord:o};return this.commands.createMesh(A.materialIndex,C,l,a??{}),new _A(this,A.materialIndex,C,e,t,c,r,o)}get globalUniforms(){return this._sceneUniforms}set globalUniforms(A){this.commands.setSceneUniforms(A),this._sceneUniforms=A}get globalTextures(){return this._sceneTextures}set globalTextures(A){const e={};for(const t in A){const s=A[t]?.textureIndex;void 0!==s&&(e[t]=s)}this.commands.setSceneTextures(e),this._sceneTextures=A}async commit(){if(this.hasChanges){const{commands:A,transferables:e}=this.commands.commit();return await this.view.executeCommands(c(A,e)),!0}return!1}dispose(){const{commands:A,transferables:e}=this.commands;A.length=0,e.length=0}}class XA{context;imageIndex;kind;options;constructor(A,e,t="2d",s){this.context=A,this.imageIndex=e,this.kind=t,this.options=s,A.images.add(this)}update(A){this.context.commands.updateImage(this.imageIndex,A,this.options)}}class ZA{context;textureIndex;image;options;constructor(A,e,t,s){this.context=A,this.textureIndex=e,this.image=t,this.options=s,A.textures.add(this)}}class qA{context;vertexLayout;materialIndex;kind;uniforms;textures;constructor(A,e,t,s,n,i){this.context=A,this.vertexLayout=e,this.materialIndex=t,this.kind=s,this.uniforms=n,this.textures=i,A.materials.add(this)}updateUniforms(A){rA(this.uniforms,A)||(Object.assign(this.uniforms,A),this.context.commands.updateMaterial(this.materialIndex,A,void 0))}updateTextures(A){if(!rA(this.textures,A)){Object.assign(this.textures,A);const e=RA(A);this.context.commands.updateMaterial(this.materialIndex,void 0,e)}}}class _A{context;materialIndex;meshId;primitiveType;textures;initialModelWorldMatrix;sortCoord;uniforms;drawElements;_visible;get visible(){return this._visible}constructor(A,e,t,s,n,i,r,o){this.context=A,this.materialIndex=e,this.meshId=t,this.primitiveType=n,this.textures=i,this.initialModelWorldMatrix=r,this.sortCoord=o,this._visible=s,this.context.meshes.add(this)}update(A){const{visible:e,uniforms:t,drawElements:s}=A;let n=!1;if(void 0!==e&&this.visible!==e&&(this._visible=e,n=!0),"modelWorldMatrix"in A){const{initialModelWorldMatrix:e}=this;e&&(A={...A,modelWorldMatrix:A.modelWorldMatrix?f(D(),A.modelWorldMatrix,e):(i=e,r=new h(16),r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r)}),n=!0}var i,r;t&&!rA(this.uniforms,t)&&(this.uniforms=t,n=!0),s&&!rA(this.drawElements,s)&&(this.drawElements=s,n=!0),n&&this.context.commands.updateMesh(this.materialIndex,this.meshId,A)}delete(){for(const A of this.textures)this.context.deleteTexture(A.texture);this.context.commands.deleteMesh(this.materialIndex,this.meshId),this.context.meshes.delete(this)}}class $A{scene;previousGeneration=0;constructor(A,e){this.scene=A}update(A,e,t,s){const{generation:n}=A;this.previousGeneration!=n&&(this.previousGeneration=n)}async dispose(){}}var Ae;(Ae||(Ae={})).create=async function(A,e){return new $A(A,e)};const ee={empty:Ae,cube:q,nodes:$,gltf:kA,octree:TA};function te(A,e){return A===e||!(!A||!e)&&A.assetId==e.assetId&&A.visible==e.visible&&k(A.position,e.position)&&k(A.scale,e.scale)&&function(A,e){return A[0]===e[0]&&A[1]===e[1]&&A[2]===e[2]&&A[3]===e[3]}(A.rotation,e.rotation)}class se{materialTypes;scriptUrl;assets;downloader=new aA;initialUniforms={};initialTextures={};resolvedCallbacks=[];core;generation=0;constructor(A,e,t){this.materialTypes=A,this.scriptUrl=e,this.assets=t}async initialize(A,e,t,s){this.core&&this.core.dispose();const n=a(A),i=new aA(s?new URL(s):void 0);await n.init();const r=function(A,e,t){return new WA(A,e,t)}(n,await n.extensions,this.materialTypes),o=function(A,e){const t=A.createMaterial("background"),s=new Float32Array([1,1,-1,1,1,-1,-1,-1]);return{id:void 0,background:t,mesh:A.createMesh(t,!1,5,s.buffer,4),downloader:e}}(r,new aA(new URL("/assets/env/",this.scriptUrl))),w=await async function(A,e,t){const s=new Array;if(A){const n=[];if(A.textures&&!("materialProperties"in A))for(const s of A.textures){let i;try{s&&-1!==s.indexOf(".")&&(i=await e.downloadImage(s))}catch(A){}if(!i)break;const r=t.createTexture(t.createImage(i,{generateMipmaps:!1}));n.push(r)}if(A.materials&&!("materialProperties"in A))for(const e of A.materials){const A={...e.uniforms},i=Array.isArray(e.textures)?{"diffuse+opacity":e.textures[0],"specular+shininess":e.textures[1]}:e.textures??{},r={};for(let A in i){const e=i[A];void 0!==e&&(r[A]=n[e])}const o=t.createMaterial(e.kind,A,r);s.push(o)}}return{downloader:e,renderContext:t,materials:s,initialUniforms:{},initialTextures:{}}}(t,i,r);let B,I;if(t){const A=ee[t.kind];if(!A)throw new Error(`Unknown scene configuration kind: '${t.kind}'!`);B=await A.create(w,t,e,(()=>{this.generation++})),I=B.boundingSphere}const C=function(A){const e=new Float32Array([0,0,0,0,0,1,0,0,0,0,1,0,0,1,1,0,1,0,0,3,1,0,1,3,1,1,0,3,1,1,1,3,0,0,0,1,0,0,1,1,1,0,0,1,1,0,1,1,0,1,0,4,1,1,0,4,0,1,1,4,1,1,1,4,0,0,0,2,1,0,0,2,0,1,0,2,1,1,0,2,0,0,1,5,0,1,1,5,1,0,1,5,1,1,1,5]),t=new Uint16Array([0,1,2,2,1,3,4,5,6,6,5,7,8,9,10,10,9,11,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23]),s=A.createMaterial("clipping_box");return A.createMesh(s,!1,4,e.buffer,t)}(r);!function(A){const e={color:R(43/255,46/255,52/255,.5)},t=A.createMaterial("watermark",e),s=function(A){var e=atob("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VwCNAKUAVgBXAKUAigCtAF0AigBdAHsAYABWAKUAfABgAKUAigB7AH0AigB9AHUAfAClAIoAngB8AIoAigB1AGMAigBjAGQAnQCeAIoAnACdAIoAigBkAJsAmwCcAIoAuAC2ALcAtwC5ALoAvAC4ALcAtwC6ALsAtwC7ALwASABHAFUAMwAyAEoASABVADMAVABIADMAMwBKAEkASQBLAFMAUwBOAE0ATQBMAE8ATwBQAFIAUgBRAEIAQgA4ADcANwA2ADUANQA0ADoAOgA5ACYAJgAlAC4ALgAvACgALgAoACcANQA6ACYAJgAuACcAJgAnAC0ANwA1ACYAUgBCADcATQBPAFIASQBTAE0AVAAzAEkARgBUAEkASQBNAFIAJgAtAEEAJgBBAEAASQBSADcARQBGAEkAQwBFAEkAJgBAADEAJgAxADAAQwBJADcARABDADcAJgAwACQAJgAkACMAKwBEADcALAArADcAJgAjADwANwAmADwAKQAsADcAKgApADcANwA8ADsANwA7AD8APQAqADcANwA/AD4APgA9ADcAPgF9AXwBPgF8AZIBHgQ6BDAAHgQwADEANgQ3BDYANgQ2ADcAKgA/BEAEKgBABCkANAQ1BCgANAQoAC8AMQQcBC0AMQQtACcAHQQ0BC8AHQQvAC4AMwQdBC4AMwQuACUAIwQ9BDsAIwQ7ADwANwQhBDUANwQ1ADYAMwAfBEYEMwBGBDIANQAhBDgENQA4BDQAPQAlBD8EPQA/BCoAOAAgBDYEOAA2BDcAOgAiBDkAJAQlBD0AJAQ9AD4APQQ+BD8APQQ/ADsAPgQkBD4APgQ+AD8ARABCBEMERABDBEMAQgBMBCAEQgAgBDgAQARBBCwAQAQsACkAMgQ5BEAAMgRAAEEASQRKBEwASQRMAE0ANAA4BCIENAAiBDoAQwQnBEUAQwRFAEMAJgRCBEQAJgREACsARQAnBEQERQBEBEYAPAQjBDwAPAQ8ACMAHAQyBEEAHARBAC0AOQQeBDEAOQQxAEAASgArBEcESgBHBEkAKQQqBEcAKQRHAEgAKAQpBEgAKARIAFQASwQvBFIASwRSAFAARwQsBEsARwRLAEkASgQuBE8ASgRPAEwASARJBE0ASARNAE4AQQQmBCsAQQQrACwATwAuBEsETwBLBFAAMARMBEIAMARCAFEAIgQzBCUAIgQlACYALQRIBE4ALQROAFMARAQoBFQARARUAEYAIgQmADkASwAsBC0ESwAtBFMAKgRFBFUAKgRVAEcAOgQ7BCQAOgQkADAANQQxBCcANQQnACgAVQBFBB8EVQAfBDMAMgBGBCsEMgArBEoAVgDVBNYEVgDWBFcAYQDoAw4EYQAOBGIAkgF8AXsBewFTAUUBRQFEAXUBdQF0AZABkAGPAUkBSQFIAYIBggFHAUYBRgE0AZEBRgGRAWoBSQGCAUYBdQGQAUkBewFFAXUBQQGSAXsBQgFBAXsBewF1AUkBSQFGAWoBSQFqAUsBQgF7AUkBUgFCAUkBSQFLAUoBSQFKAUwBUAFSAUkBSQFMAU0BSQFNAVABNAFGAY4BjgF/AXcBdwF2AY0BjQGBAYABgAFAAT8BPwF4AYwBjAE+AXoBjAF6AXkBgAE/AYwBdwGNAYABNAGOAXcBNQE0AXcBdwGAAYwBjAF5AVcBjAFXAVYBawE1AXcBTgFrAXcBdwGMAVYBdwFWAVUBTwFOAXcBUQFPAXcBdwFVAVQBdwFUAVEBPgGMAX4BfgE3ATYBNgF9AT4BfgE2AT4BWAF9ATYBNgGLAYoBigGJAW0BbQFlAWQBZAFoAYQBhAGDAYgBiAGHAYYBhgGFAWkBaQFnAWYBZgFvAW4BbgFsAWMBYwFZAUMBYwFDATkBZgFuAWMBhgFpAWYBhAGIAYYBbQFkAYQBNgGKAW0BWgFYATYBOgFaATYBNgFtAYQBhAGGAWYBZgFjATkBZgE5ATgBOgE2AYQBOwE6AYQBZgE4AT0BZgE9ATwBWwE7AYQBXAFbAYQBhAFmATwBhAE8AV0BXgFcAYQBYAFeAYQBhAFdAV8BhAFfAXABYQFgAYQBYgFhAYQBhAFwAXMBhAFzAXIBcQFiAYQBcgFxAYQBzwDRAMsAywDKAMkAyQDIAM0AzQDMAM4AwAC/AMQAzQDOAMAAywDJAM0A0ADPAMsAvQDQAMsAywDNAMAAwADEAMUAxQDCAMEAxQDBAMMAvgC9AMsAxgC+AMsAwADFAMMAwADDANMAxgDLAMAAxwDGAMAAwADTANIAwADSAMcAWgDfBMkEWgDJBFsADgTnA2sADgRrAGIAXAC9BNAEXADQBF0AXgDPBL0EXgC9BFwAXwC8BM8EXwDPBF4AYADUBNUEYADVBFYAYwC/BNMEYwDTBGQACwTrA3oACwR6AHkAZQDZBNsEZQDbBGYAbgDeBMgEbgDIBG8AEwTsA1gAEwRYAGoAEQQSBG0AEQRtAGwAEgTxA3YAEgR2AG0ACgQRBGwACgRsAHQAcADMBM0EcADNBHEAcQDNBM4EcQDOBHIAcwC6BMwEcwDMBHAAdQDSBL8EdQC/BGMAAwQMBIoAAwSKAIkAdwDLBN0EdwDdBHgA9wMLBHkA9wN5AKMAXQDQBNEEXQDRBHsADQTvA4EADQSBAIAAfADEBNQEfADUBGAAewDRBL4EewC+BH0AfQC+BNIEfQDSBHUAfgDwA+UDfgDlA38AggDYBMcEggDHBIMAegDrA/0DegD9A4cAhgDGBNgEhgDYBIIALwQwBFEALwRRAFIAVwDWBMUEVwDFBI0AmAAEBA8EmAAPBJkACATmA4UACASFAIQAEAT7A4wAEASMAIsAFAT5A4gAFASIAFkA/gP/A6QA/gOkAGgAjgDgBLEEjgCxBI8AjwCxBLIEjwCyBJAAkACyBLMEkACzBJEAkQCzBLQEkQC0BJIAkgC0BLUEkgC1BJMAkwC1BLYEkwC2BJQAlAC2BLcElAC3BJUAlQC3BLgElQC4BJYAlgC4BLkElgC5BJcAlwC5BLoElwC6BHMAmgC7BLwEmgC8BF8AoADtA/oDoAD6A2kAmwDABMEEmwDBBJwAnADBBMIEnADCBJ0AnQDCBMMEnQDDBJ4AngDDBMQEngDEBHwAWwDJBMoEWwDKBJ8AnwDKBMsEnwDLBHcApQD2A/UDpQD1A6YA+wP4A6EA+wOhAIwAoQD4A/wDoQD8A6IA/wP2A6UA/wOlAKQA+QMQBIsA+QOLAIgAAAQBBKgAAASoAKcApgD1AwAEpgAABKcAZgDbBOAEZgDgBI4A9AMCBKoA9AOqAKkADwQFBLEADwSxAJkAqgACBAMEqgADBIkA5wMGBK0A5wOtAGsAeADdBNwEeADcBKsAgwDHBNoEgwDaBKwAqwDcBNkEqwDZBGUA5gMJBK4A5gOuAIUArADaBN4ErADeBG4AfwDlAw0EfwANBIAAsADyAwoEsAAKBHQA7AMUBFkA7ANZAFgArgAJBPIDrgDyA7AA+gMTBGoA+gNqAGkAbwDIBN8EbwDfBFoADAQEBJgADASYAIoArQAGBAcErQAHBLMABQTzA7IABQSyALEAswAHBAgEswAIBIQAjQDFBNcEjQDXBLQA/AP3A6MA/AOjAKIAtQDuA+0DtQDtA6AAtADXBMYEtADGBIYAsgDzA+gDsgDoA2EA/QPqA2cA/QNnAIcA8QPwA34A8QN+AHYAZADTBMAEZADABJsA6gP+A2gA6gNoAGcAcgDOBLsEcgC7BJoAgQDvA+4DgQDuA7UAAQTpA68AAQSvAKgABQUGBdUABQXVANQAFQQbBLcAFQS3ALYAFgQVBLYAFgS2ALgAGAQXBLoAGAS6ALkAGgQZBLwAGgS8ALsAFwQaBLsAFwS7ALoAvAAZBBYEvAAWBLgAGwQYBLkAGwS5ALcAwQAiAA0AwQANAMMAXANdA6ABXAOgAaEBvwAOAA8AvwAPAMQAvgAYAB0AvgAdAL0A0wAhABcA0wAXANIA7gDvAAMBAwEsAS4BLgHyAOoA6gDrAPQA9AD8AP0A/QD+AP8A/wAzAR4BHgHnAOgA6ADWANcA1wAGAQkBCQEKAR8BHwEgASEBIQH3APgA+AABASoB+AAqAewAHwEhAfgA1wAJAR8BHgHoANcA/QD/AB4B6gD0AP0AAwEuAeoA8QDuAAMBFQHxAAMBAwHqAP0A/QAeAdcA1wAfAfgA+ADsAO0A+ADtANgAFQEDAf0AFAEVAf0A1wD4ANgA1wDYANkAEwEUAf0AEgETAf0A1wDZAB0B1wAdAfUAEQESAf0AEAERAf0A1wD1APYA1wD2ACkBDwEQAf0ADgEPAf0A1wApAeMA1wDjAOQADgH9ANcADQEOAdcA1wDkAAwB1wAMAQ0BzAAMAM4ADADAAM4AwgARACIAwgAiAMEAxQAQABEAxQARAMIAwAAMAA4AwAAOAL8AxwASAB4AxwAeAMYAyQAVAB8AyQAfAMgAygAUABUAygAVAMkAywAgABQAywAUAMoANwGnA64DNwGuAzYBzQAWAAwAzQAMAMwA0AAZABoA0AAaAM8A0QAbABwAvQAdABkAvQAZANAA0gAXABIA0gASAMcAwwANACEAwwAhANMAcAN1A3IBcANyAXMB5wDKA+MD5wDjA+gAyAAfABYAyAAWAM0AzwAaABsAzwAbANEAcQOJA2EBcQNhAWIBAgEDAe8AAgHvAPAAKwExAQIB4ADpACsBMAHfAOAAFwEvATABCAEWARcBKAEHAQgBLQEnASgBJQEmAS0BIwEkASUB5gAiASMBBQHlAOYAAQH4AAUBAAEBAQUBBQHmACMBIwElAS0BLQEoAQgBCAEXATABMAHgACsBKwECAfAAKwHwABgBCAEwASsBIwEtAQgBAAEFASMBBAEAASMBKwEYAd0AKwHdANwAMgEEASMBCwEyASMBKwHcANoAKwHaANsA1QALASMB1ADVACMBCAErAdsACAHbAPkA3gDUACMB+gDeACMBCAH5APsACAH7APMA+gAjAQgBHAH6AAgBCAHzAOEACAHhAOIAGwEcAQgBGgEbAQgBCAHiABkBGQEaAQgBBAUFBdQABAXUAN4A/QC1A90D/QDdA/4AAQH3BAoFAQEKBSoBDwX5BNkADwXZANgA6wTsBN0A6wTdABgBBwX2BAQBBwUEATIB7wQDBeIA7wTiAOEA6wDiA8ED6wDBA/QACQULBeQACQXkAOMADgX4BO0ADgXtAOwAAwG2A9kDAwHZAywB6gDhA+ID6gDiA+sA3wC4A94D3wDeA+AA2gPhA+oA2gPqAPIA/AT9BO8A/ATvAO4A/QT+BPAA/QTwAO8A6gT8BO4A6gTuAPEABgX1BAsBBgULAdUA+wDuBAIF+wACBfMA/wTtBNoA/wTaANwA+QABBe4E+QDuBPsA2gDtBAAF2gAABdsA4ADeA7cD4AC3A+kABAH2BAgFBAEIBQAB4gTjBA8B4gQPAQ4BIQHHA9sDIQHbA/cABwHTA9wDBwHcAwgBLQG5A8QDLQHEAycBIAUfBTQBIAU0ATUBoAIBAFMEUwRSBAAAUwQAAKAC/gDdA78D/gC/A/8ACwUQBQwBCwUMAeQAAgHYA7YDAgG2AwMB+AC7A80D+ADNAwUBCQHgA8sDCQHLAwoB1wDkA8kD1wDJAwYBFgHUA98DFgHfAxcB4QTiBA4B4QQOAQ0BCAX3BAEBCAUBAQAB5ATlBBEB5AQRARAB8wACBe8E8wDvBOEADAEQBeEEDAHhBA0B5QTmBBIB5QQSAREB5gTnBBMB5gQTARIB5wToBBQB5wQUARMB6ATpBBUB6AQVARQB6QTqBPEA6QTxABUBDQUMBSkBDQUpAfYAGgHxBPIEGgHyBBsBAAUBBfkAAAX5ANsADwHjBOQEDwHkBBAB5gDOA88D5gDPAyIB8ATxBBoB8AQaARkBGwHyBPMEGwHzBBwB8wT0BPoA8wT6ABwB2QD5BPoE2QD6BB0BBgHJA+ADBgHgAwkBHgG9A8oDHgHKA+cACgHLA8gDCgHIAx8BHwHIA8wDHwHMAyABJQHQA9EDJQHRAyYBIAHMA8cDIAHHAyEBtwFDA7YBIgHPA8YDIgHGAyMBKAHSA9MDKAHTAwcBJAHFA9ADJAHQAyUBCAHcA9QDCAHUAxYB9QD7BA0F9QANBfYADAUJBeMADAXjACkB3QDsBP8E3QD/BNwA5QC6A84D5QDOA+YACgUOBewACgXsACoB6ADjA7wD6AC8A9YA9wDbA7sD9wC7A/gA1gC8A+QD1gDkA9cA+AQPBdgA+ATYAO0AMAHDA7gDMAG4A98ALwHVA8MDLwHDAzABLAHZA8IDLAHCAy4B9QQHBTIB9QQyAQsBKwHWA9cDKwHXAzEBJwHEA9IDJwHSAygBMQHXA9gDMQHYAwIBLgHCA9oDLgHaA/IAAwXwBBkBAwUZAeIA/wC/A74D/wC+AzMB+gT7BPUA+gT1AB0BBQHNA7oDBQG6A+UAFwHfA9UDFwHVAy8BMwG+A70DMwG9Ax4B6QC3A9YD6QDWAysB/gTrBBgB/gQYAfAA+gD0BAQF+gAEBd4AJgHRA7kDJgG5Ay0BIwHGA8UDIwHFAyQB9ADBA8AD9ADAA/wAPQGLA6oDPQGqAzwBOQF3A4wDOQGMAzgBOwF0A6MDOwGjAzoBcwN0AzsBcwM7AVsBfQOVA2gBfQNoAWQBQgEYBUEBbgN3AzkBbgM5AUMBRQGkA6EDRQGhA0QBSwEeBR0FSwEdBUoBtANYAVoBpgOCA0YBpgNGAUcBSgEdBRwFSgEcBUwBTAEcBRsFTAEbBU0BTwESBREFTwERBU4BTQEbBRoFTQEaBVABUQETBRIFUQESBU8BUAEaBRkFUAEZBVIBhQOkA0UBhQNFAVMBUgEZBRgFUgEYBUIBVAEUBRMFVAETBVEBFQUUBVQBFQVUAVUBFgUVBVUBFgVVAVYBFwUWBVYBFwVWAVcBPAGqA6sDPAGrA10BsAOvA4wBsAOMAXgBywATACAAhwNzA1sBhwNbAVwBXQGrA3YDXQF2A18BxgAeABgAxgAYAL4AagEiBR4FagEeBUsBmgN/Az8BmgM/AUABYAFyA4gDYAGIA14BiQNyA2ABiQNgAWEBegN5A2MB0QAcABMA0QATAMsAZQF+A30DZQF9A2QBqAOPA2YBqANmAWcBaQGQA6gDaQGoA2cBjQN6A2MBjQNjAWwBZgGPA3sDZgF7A28BTgERBSEFTgEhBWsBbQGWA34DbQF+A2UBewOOA24BewNuAW8BegEkBXkBdgNvA3ABdgNwAV8BcQGKA3EDcQFxA2IBdQOKA3EBdQNxAXIBgQOyA3YBgQN2AXcBhAOgA3QBhAN0AXUBqQNuA0MBqQNDAVkBfwOwA3gBfwN4AT8BtAOGA3wBtAN8AX0BsQOAA4ABsQOAAYEBfAGGA6IDfAGiA3sBJAUXBVcBJAVXAXkBmQOnAzcBmQM3AX4BewGiA4UDewGFA1MBRAGhA4QDRAGEA3UBnAOBA3cBnAN3AX8BawEhBSAFawEgBTUBfAOUA4MBfAODAYQBnQOmA0cBnQNHAYIBcAFvA3ADcAFwA3MBpQOdA4IBpQOCAUgBrAORA4UBrAOFAYYBowO0A1oBowNaAToBjgONA2wBjgNsAW4BjAOLAz0BjAM9ATgBkQOQA2kBkQNpAYUBmAOXA4oBmAOKAYsBiAGTA5IDiAGSA4cBkgOsA4YBkgOGAYcBlwOtA4kBlwOJAYoBlAOTA4gBlAOIAYMBrQOWA20BrQNtAYkBdAGgA58DdAGfA5ABrgOYA4sBrgOLATYBnwOeA48BnwOPAZABrwOZA34BrwN+AYwBmwOxA4EBmwOBAY0BgwOlA0gBgwNIAUkBsgObA40BsgONAXYBswOcA38BswN/AY4BggOzA44BggOOAUYBgAOaA0ABgANAAYABYwF5A3gDYwF4A1kBkQEjBSIFkQEiBWoBNAEfBSMFNAEjBZEBPgEkBXoBlQN8A4QBlQOEAWgBngODA0kBngNJAY8BtAN9AVgBeAOpA1kBQQEYBZIBkgEYBSQFkgEkBT4BxAAPABAAxAAQAMUA6QP0A6kA6QOpAK8AxQHEAdIBsAGvAccBxQHSAbAB0QHFAbABsAHHAcYBxgHIAdAB0AHLAcoBygHJAcwBzAHNAc8BzwHOAb8BvwG1AbQBtAGzAbIBsgGxAbcBtwG2AaMBowGiAasBqwGsAaUBqwGlAaQBsgG3AaMBowGrAaQBowGkAaoBtAGyAaMBzwG/AbQBygHMAc8BxgHQAcoB0QGwAcYBwwHRAcYBxgHKAc8BowGqAb4BowG+Ab0BxgHPAbQBwgHDAcYBwAHCAcYBowG9Aa4BowGuAa0BwAHGAbQBwQHAAbQBowGtAaEBowGhAaABqAHBAbQBqQGoAbQBowGgAbkBtAGjAbkBpgGpAbQBpwGmAbQBtAG5AbgBtAG4AbwBugGnAbQBtAG8AbsBuwG6AbQBQwNUA6IBQwOiAaMBVgNSA6QBVgOkAaUBpwFgA2EDpwFhA6YBVQNWA6UBVQOlAawBUgM9A6oBUgOqAaQBPgNVA6wBPgOsAasBPwNbA60BPwOtAa4BtAFXA1gDtAFYA7MBsAFAA2cDsAFnA68BsgFCA1kDsgFZA7EBswFYA0IDswFCA7IBtQFBA1cDtQFXA7QBuQFEA14DuQFeA7gBuwFFA0YDuwFGA7oBuAFeA18DuAFfA7wBugFGA2ADugFgA6cBSgNLA8QBSgPEAcUBvwFtA0EDvwFBA7UBpgFhA2IDpgFiA6kBUwNaA70BUwO9Ab4BwQFjA2QDwQFkA8ABwAFkA0gDwAFIA8IBygFqA2sDygFrA8kBqAFHA2MDqAFjA8EBwgFIA2UDwgFlA8MBvAFfA0UDvAFFA7sBXQNEA7kBXQO5AaABWgM/A64BWgOuAb0BsQFZA0MDsQFDA7cBPQNTA74BPQO+AaoBzwFQA1EDzwFRA84BxwFMA2gDxwFoA8YBxgFoA00DxgFNA8gByQFrA08DyQFPA8wBywFpA2oDywFqA8oBWwNcA6EBWwOhAa0BzAFPA2wDzAFsA80BzQFsA1ADzQFQA88BSQNKA8UBSQPFAdEBzgFRA20DzgFtA78B0AFOA2kD0AFpA8sBZQNJA9EBZQPRAcMBSwNmA9IBSwPSAcQByAFNA04DyAFOA9ABtgFDA6MB0gFmA0AD0gFAA7ABqQFiA0cDqQFHA6gBrwFnA0wDrwFMA8cBOAJdBV4FOAJeBTcCOwQ8BCMAOwQjACQA4AEgAh8C4AEfAjYCNgIfAh4CHgL1AecB5wHmARgCGAIXAjQCNAIzAusB6wHqASYCJgLpAegB6AHWATUC6AE1Ag0C6wEmAugBGAI0AusBHgLnARgC4wE2Ah4C5AHjAR4CHgIYAusB6wHoAQ0C6wENAu0B5AEeAusB9AHkAesB6wHtAewB6wHsAe4B8gH0AesB6wHuAe8B6wHvAfIB1gHoATICMgIjAhoCGgIZAjECMQIlAiQCJALiAeEB4QEbAjACMALgAR0CMAIdAhwCJALhATACGgIxAiQC1gEyAhoC1wHWARoCGgIkAjACMAIcAvkBMAL5AfgBDgLXARoC8AEOAhoCGgIwAvgBGgL4AfcB8QHwARoC8wHxARoCGgL3AfYBGgL2AfMB4AEwAiECIQLZAdgB2AEgAuABIQLYAeAB+gEiAiACIALYAS8CLwIuAi0CLQIQAggCCAIHAgsCCwIoAicCJwIsAisCKwIqAikCKQIMAgoCCgIJAhICEgIRAg8CDwIGAvwB/AHlAdsBDwL8AdsBCgISAg8CKwIpAgoCCwInAisCLQIIAgsCIAIvAi0C+gEgAi0CLQILAisCKwIKAg8CDwLbAdoBDwLaAd8B+wH6AS0C/QH7AS0CKwIPAt8BKwLfAd4B3AH9AS0C3QHcAS0CKwLeAQACKwIAAgIC/gHdAS0C/wH+AS0CKwICAhMCKwITAhYC/wEtAisCAQL/ASsCKwIWAhUCKwIVAhQCAwIBAisCBAIDAisCKwIUAgUCBQIEAisC2wHYAu0C2wHtAtoB4gH7AuAC4gHgAuEB5gIFA+cB5gLnAfUB3QHVAgQD3QEEA9wBAQLpAugCAQLoAv8BNQI2BTUFNQI1BQ0C8wEnBSYF8wEmBfEB3wHsAgsD3wELA94BzwLYAtsBzwLbAeUB5wEFAwID5wECA+YB6QEHA+MC6QHjAugB7gEvBS4F7gEuBe8B5AE3BeMB4AE4BR0C8AElBTQF8AE0BQ4CKAUnBfMBKAXzAfYB8gEtBSwF8gEsBfQB9AEsBTcF9AE3BeQB+wH9ARUDKgUpBfcBKgX3AfgBKQUoBfYBKQX2AfcBDQI1BTEFDQIxBe0BKwUqBfgBKwX4AfkBDgI0BTMFDgIzBdcBIAIiAhUD/wHoAtQC/wHUAv4B3gELAwwD3gEMAwACAAIMA9cCAALXAgIC/AEKA88C/AHPAuUBBgLbAtoCAwLTAukCAwLpAgECBALqAtMCBALTAgMCBQLSAuoCBQLqAgQCCgIJA/ACCgLwAgkCCALfAt4CCALeAgcCBwLeAvYCBwL2AgsCDALxAgkDDAIJAwoCDwLuAtsCDwLbAgYCAgLXAtACAgLQAhMCOAUrBfkBOAX5ARwC7AEwBS8F7AEvBe4BEAL3At8CEALfAggCEgLcAu8CEgLvAhECCQLwAtwCCQLcAhICFQLWAusCFQLrAhQCFALrAtICFALSAgUCFgLRAtYCFgLWAhUCGgLiAhMDGgITAxkCGALlAgEDGAIBAxcC5wIDAx4C5wIeAh8C4QHgAhED4QERAxsCEwLQAtECEwLRAhYCIQL6AggDIQIIA9kBMQUwBewBMQXsAe0BIAIVA+cCIALnAh8CIgL6ARUD/ADAA7UD/AC1A/0AJQISA+ECJQLhAiQCAwPmAvUBAwP1AR4CIwL9AuICIwLiAhoC5gECA+UC5gHlAhgCJgL+AgcDJgIHA+kBKALdAvUCKAL1AicC6gEGA/4C6gH+AiYCKgINA/ICKgLyAikC3AEEAxUD3AEVA/0B2gHtAuwC2gHsAt8BGwIRAxADGwIQAzACEQLvAu4CEQLuAg8CKQLyAvECKQLxAgwCLAL0AvMCLALzAisCKwLzAg0DKwINAyoCLQIOA/cCLQL3AhACJwL1AvQCJwL0AiwCLwL5AvgCLwL4Ai4CLgL4Ag4DLgIOAy0C2AEPA/kC2AH5Ai8CNAIAA/8CNAL/AjMCMAIQA/oCMAL6AiECMQL8AhIDMQISAyUC6wHkAgYD6wEGA+oBGQITA/wCGQL8AjECMgIUA/0CMgL9AiMC6AHjAhQD6AEUAzICFwIBAwADFwIAAzQCJALhAvsCJAL7AuIBOAUcAh0C1gEyBTYF1gE2BTUC4wE3BTYCCwL2At0CCwLdAigCMwL/AuQCMwLkAusBBgLaAtkCBgLZAvwB/AHZAgoDLgUtBfIBLgXyAe8BNgI3BTgFNgI4BeAB8QEmBSUF8QElBfAB/gHUAtUC/gHVAt0BCQAHAJQBlAGVAZYBlgGXAQsACwCTAQoAnwHTAZsBCwAKAJ8BlAGWAQsACAAJAJQB1QEIAJQBlAELAJ8BnwGbAZoBmgGdAZ4BmgGeAZwB1AHVAZQBmQHUAZQBnwGaAZwBnwGcAQUAmQGUAZ8BmAGZAZ8BnwEFAAYAnwEGAJgBnQHJArgCnQG4Ap4B1AHCAr0C1AG9AtUBngG4As0CngHNApwBmAHIArwCmAG8ApkBnwHOAswCnwHMAtMBmwHLAsoCmwHKApoB0wHMAssC0wHLApsBlgHFArsClgG7ApcBlAHHAroCmgHKAskCmgHJAp0BlAG6AsYClAHGApUBBwC/Ar4ClQHGAsUClQHFApYBCwDEAs4CCwDOApMBzgKfAQoABQC5AsMCBQDDAgYACADBAsACCADAAgkA1QG9AsEC1QHBAggAlwG7AsQClwHEAgsACQDAAr8CCQC/AgcAnAHNArkCnAG5AgUABwC+AscCBwDHApQBmQG8AsICmQHCAtQBBgDDAsgCBgDIApgBiQKKAosCiQKLAowCjgKNAogCjgKIAo8CVAM+A6sBVAOrAaIBUwJaAoICUwKCAksCeQJUAlMCdwJ4AnkCYQJiAncCOQJeAmECSAI6AjkCdgJJAkgCWAKGAnYCgwJZAlgCbQKKAoMCawJtAoMCgwJYAnYCdgJIAjkCOQJhAncCdwJ5AlMCUwJLAkoCUwJKAjwCOQJ3AlMCgwJ2AjkCagJrAoMCaQJqAoMCOQJTAjwCOQI8AjsCaAJpAoMCZwJoAoMCOQI7AnUCOQJ1AlICZgJnAoMCZAJmAoMCOQJSAlECOQJRAoECZAKDAjkCZQJkAjkCOQKBAkUCRAJlAjkCRQJEAjkCOgI0AzUDOgI1AzkCPAJnBVEFPAJRBTsCPgJFBVgFPgJYBT0CPwJXBUUFPwJFBT4CQAJEBVcFQAJXBT8CQQJcBV0FQQJdBTgCQwJHBVsFQwJbBUICRQJhBWMFRQJjBUQCRwIxAx0DRwIdA0YCSQIWAzMDSQIzA0gCSwJmBVAFSwJQBUoCTQJUBVUFTQJVBUwCTAJVBVYFTAJWBU4CTwJCBVQFTwJUBU0CUAJaBUcFUAJHBUMCUgJTBWUFUgJlBVECVAIqAzADVAIwA1MCPQJYBVkFPQJZBVUCVgJMBVwFVgJcBUECVQJZBUYFVQJGBVcCVwJGBVoFVwJaBVACWQItAycDWQInA1gCWwJgBU8FWwJPBVoCXAJOBWAFXAJgBVsCUwIwAxwDUwIcA10COQI1AxcDOQIXA14CYAIlAysDYAIrA18CXgIXAy8DXgIvA2ECYQIvAxgDYQIYA2ICNwJeBU0FNwJNBWMCZQJoBTkFZQI5BWQCZAI5BToFZAI6BWYCZgI6BTsFZgI7BWcCZwI7BTwFZwI8BWgCaAI8BT0FaAI9BWkCaQI9BT4FaQI+BWoCagI+BT8FagI/BWsCbQJABUEFbQJBBWwCbAJBBUIFbAJCBU8CbwImAy4DbwIuA24CcAJDBUQFcAJEBUACcgJIBUkFcgJJBXECcQJJBUoFcQJKBXMCcwJKBUsFcwJLBXQCdAJLBUwFdAJMBVYCOwJRBVIFOwJSBXUCdQJSBVMFdQJTBVICdgIpAxYDdgIWA0kCYgIYAxkDYgIZA3cCdwIZAxoDdwIaA3gCeAIaAxsDeAIbA3kCRgIdAx4DRgIeA3oCegIeAx8DegIfA3sCewIfAyADewIgA3wCfAIgAyEDfAIhA30CfQIhAyIDfQIiA34CgAIjAyQDgAIkA38CfwIkAyUDfwIlA2ACRAJjBWgFRAJoBWUCUQJlBWQFUQJkBYECWgJPBWIFWgJiBYICgQJkBWEFgQJhBUUCgwIsAy0DgwItA1kCSAIzAzQDSAI0AzoCggJiBWYFggJmBUsChAIyAyMDhAIjA4ACSgJQBWcFSgJnBTwCXwIrAyYDXwImA28CXQIcAzEDXQIxA0cCYwJNBV8FYwJfBYUChgIoAykDhgIpA3YChQJfBU4FhQJOBVwCfgIiAzIDfgIyA4QCbgIuAzwDbgI8A4cCQgJbBUgFQgJIBXICTgJWBUMFTgJDBXACGwMqA1QCGwNUAnkCWAInAygDWAIoA4YChwI8A4gCiQI3AywDiQIsA4oCiwI2AzgDiwI4A4wCjAI4AzcDjAI3A4kCigIsA4MCawI/BUAFawJABW0COQM7A40COQONAo4COgM5A44COgOOAo8CeARfBJACeASQAp4CPAM6A48CPAOPAogCOwM2A4sCOwOLAo0CiwKKAm0CiwJtAmwCiAKNAosCQAI/AogCcAJAAogCiwJsAk8CiwJPAk0CcAKIAosCTgJwAosCiwJNAkwCTAJOAosCWwJaAlMCUwJdAkcCRwJGAnoCegJ7AnwCfAJ9An4CfgKEAoACgAJ/AmACYAJfAm8CbwJuAocChwKIAj8ChwI/Aj4CYAJvAocCfgKAAmACegJ8An4CUwJHAnoCXAJbAlMChQJcAlMCUwJ6An4CfgJgAocChwI+Aj0ChwI9AlUChQJTAn4CYwKFAn4ChwJVAlcChwJXAlACNwJjAn4COAI3An4ChwJQAkMChwJDAkICQQI4An4CVgJBAn4CfgKHAkICfgJCAnICdAJWAn4CcwJ0An4CfgJyAnECfgJxAnMCrgKNBFkEWQSiArcCWQS3Aq4CkAJfBF4EawRQBJECkgJcBHMEkwJOBGkElAJbBHEElAJxBJUCkQJQBE8EZARNBJYCZASWApkClwJiBGEElwJhBJgClgJNBGMEYwRiBJcCYwSXApYCmQJlBGQEZgRlBJkCZwRmBJkCZwSZApoCmgJoBGcEaQRoBJoCaQSaApMCdARcBJICdASSApsCTwRqBJMCTwSTApECagROBJMCXQR1BJsCXQSbApwCXgR3BJwCXgScApACnAJ2BF0EcwRyBJ0CcwSdApICmwJ1BHQEdwR2BJwCngJ5BHgEegR5BJ4CnwJ7BHoEnwJ6BJ4CmAJ8BHsEmAJ7BJ8CUQRtBKACnQJyBFsEnQJbBJQCpAJVBFQEAQCgAqQCVAQBAKQCmAJhBGAEAABuBFEEAABRBKAC+gH7ARUDVwRWBKQCWgRwBKECWgShApUCbARrBJECbASRAqACpAJvBFcEoQKiAlkEWQRYBKMCWQSjAqECowJYBG8EowJvBKQClQJxBFoEgASBBAIAgAQCAKYCoAJtBGwEmAJgBHwEVgRVBKQChAShBKYCqASnBKUCpgSlBKcCrwSuBKgCrwSoAqkCqQSoBKUCqQSlAqwCpwSmBKcCpwSnAqUClQSUBK0ClQStAqsCsASvBKkCrgStBLECrgSxAqgCpAR+BKoCpASqAqcChwSIBAMAhwQDALQCAwCcBJsEAwCbBLQClwSWBKsClwSrArQCmQSYBLQCpQSkBKcCqgSpBKwClASLBK0ChgSHBLQCjASNBK4CjASuArMCrQKLBH0ErQJ9BLACfgR/BK8CfgSvAqoCfQSOBLACrQSsBLECAgCjBIMEAgCDBKYCsAKOBI8EqwKWBJUEjwSQBLICjwSyArACsgKQBJEEkgSTBLMCkwSMBLMCkQSSBLMCkQSzArICfwSABKYCfwSmAq8CrASrBKwCrASsArECqwSqBKwCmASXBLQCBACaBJkEBACZBLQCtQKeBJ0EtQKdBLQCtgKFBJ4EtgKeBLUCnwSFBLYCnwS2AqYCoASfBKYCogSEBKYCnQSGBLQCgwSiBKYCmwSKBAQAmwQEALQCoQSgBKYCogJwBLAEsASpArcCsAS3AqICiAOHA1wBiANcAV4BcASiAqECAQBUBFMEAABSBG4EBACKBJoEAwCJBJwEAwCIBIkEAgCCBKMEAgCBBIIEoAKRApMCkwKaApkCmQKWApcClwKYAqMCowKkAqACoAKTApkCmQKXAqMCmQKjAqACrwKmArYCtgK3AqkCqQKoArECsQKsAqUCpQKnAqoCqgKvArYCtgKpArECsQKlAqoCtgKxAqoCtgK1ArQCtAKrAq0CrQKwArICsgKzAq4CrgK3ArYCtgK0Aq0CrQKyAq4CrQKuArYCnwKeApACkAKcApsCmwKSAp0ClAKVAqECmwKdApQCnwKQApsCowKYAp8ClAKhAqMCnwKbApQClAKjAp8CkwHOAgoA2QEIAw8D2QEPA9gBMwUyBdYBMwXWAdcB"),t=e.length,s=new Uint8Array(t);for(let A=0;A<t;A++)s[A]=e.charCodeAt(A);return s.buffer}(),n=new Float32Array(s,0,4155).slice(),i=new Uint16Array(s,16620,6138).slice();A.createMesh(t,!0,4,n.buffer,i)}(r);const c=function(A,e){const t=A.createMaterial("basic_za",{rgba:R(.5,.5,1,.5)}),s=new nA(4,e.basic_za.contextData.vertexLayout),n=s.set(0),i=5e4;return n(0,U(-i,0,-i)),n(1,U(i,0,-i)),n(2,U(-i,0,i)),n(3,U(i,0,i)),A.createMesh(t,!0,5,s.view.buffer,s.size)}(r,this.materialTypes);return r.globalUniforms=w.initialUniforms,r.globalTextures=w.initialTextures,this.core=new se.Core(w.downloader,w.renderContext,w.materials,B,o,c,C),r.commit(),I}async update(A,e,t,s,n){performance.mark("geometry_update_begin");const{hasChanges:i,resolved:r,gpuBytes:o,triangles:a}=await(this.core?.update(A,e,this.assets.assets,this.assets.environments,t,s,n))??{hasChanges:!1,resolved:!1};performance.mark("geometry_update_end"),performance.measure("geometry_update","geometry_update_begin","geometry_update_end"),performance.clearMarks();const w=performance.getEntriesByName("geometry_update")[0].duration;performance.clearMeasures();const{generation:B}=this;return{generation:B,updateTime:w,optimizeTime:0,resolved:r,changed:i,gpuBytes:o,triangles:a}}async dispose(){const{core:A}=this;A&&A.dispose()}}(se||(se={})).Core=class{downloader;renderContext;materials;geometry;environment;ocean;clippingBox;initialUniforms={};initialTextures={};existingInstances=[];geometries=[];grid;prevGridSettings;constructor(A,e,t,s,n,i,r){this.downloader=A,this.renderContext=e,this.materials=t,this.geometry=s,this.environment=n,this.ocean=i,this.clippingBox=r}dispose(){const{downloader:A,geometry:e}=this;A.abort(),e?.dispose()}setEnvironmentData(A){const{renderContext:e}=this,{environment:t}=this;if(!t)return;const{downloader:s}=t;if(s.activeDownloads>0&&s.abort(),t.id=A?.id,t.mesh.update({visible:void 0!==A}),e.globalTextures.irradiance&&e.deleteTexture(e.globalTextures.irradiance),e.globalTextures.radiance&&e.deleteTexture(e.globalTextures.radiance),t.background.textures.background&&e.deleteTexture(t.background.textures.background),A){const s=e.createEnvironmentTextures(A),{background:n,irradiance:i,radiance:r,lut:o}=s;e.globalTextures={...e.globalTextures,irradiance:i,radiance:r,ggx_lut:o},t.background.updateTextures({background:n})}else e.globalTextures={...e.globalTextures,irradiance:void 0,radiance:void 0},t.background.updateTextures({background:void 0})}async update(A,e,t,s,n,i,r){if(this.environment&&this.environment.id!=i.environment?.id){const A=s[i.environment?.id??-1];this.setEnvironmentData(A)}null!=this.grid&&rA(this.prevGridSettings,i.grid)||(this.grid?.majorLines.delete(),this.grid?.minorLines?.delete(),i.grid.enabled?this.grid=function(A,e){const t=E(D(),e.grid.origo),s=e.grid.axisX,n=e.grid.axisY,i=y(),r=y(),o=e.grid.majorLineCount,a=e.grid.minorLineCount;a>0&&(O(i,s,1/(a+1)),O(r,n,1/(a+1)));const w=[],B=[],I=O(y(),s,(o-1)/2),C=O(y(),n,(o-1)/2),c=y(),g=y();for(let A=0;A<o;++A){const e=A-(o-1)/2;if(O(c,s,e),w.push(L(y(),c,C)),w.push(G(y(),c,C)),a>0&&A!=o-1){z(g,c);for(let A=0;A<a;++A)L(g,g,i),B.push(L(y(),g,C)),B.push(G(y(),g,C))}if(O(c,n,e),w.push(L(y(),c,I)),w.push(G(y(),c,I)),a>0&&A!=o-1){z(g,c);for(let A=0;A<a;++A)L(g,g,r),B.push(L(y(),g,I)),B.push(G(y(),g,I))}}const[l,b,d]=e.grid.majorColor,h=A.createMaterial("basic",{rgba:R(l,b,d,1)}),u=new Float32Array(w.flatMap((A=>[...A,0,0,0,0,0])));if(e.grid.minorLineCount>0){const[s,n,i]=e.grid.minorColor,r=A.createMaterial("basic",{rgba:R(s,n,i,1)}),o=new Float32Array(B.flatMap((A=>[...A,0,0,0,0,0])));return{majorLines:A.createMesh(h,!0,1,u.buffer,w.length,void 0,t),minorLines:A.createMesh(r,!0,1,o.buffer,B.length,void 0,t)}}return{majorLines:A.createMesh(h,!0,1,u.buffer,w.length,void 0,t)}}(this.renderContext,i):this.grid=void 0,this.prevGridSettings=i.grid),this.clippingBox?.update({visible:i.clippingPlanes?.showBox??!1});const{geometry:o}=this,a=o?.update(A,n,i,r),w=a?.resolved??!0,B=a?.gpuBytes,I=a?.triangles,{ocean:C}=i;let c={visible:C?.enabled??!1};if(C){const A={};C.color&&(A.color=C.color),C.opacity&&(A.opacity=C.opacity),Reflect.ownKeys(A).length>0&&(c.uniforms=A)}this.ocean.update(c),this.updateInstances(A,e,t,i,r);const g=this.renderContext.hasChanges;return this.renderContext.commit(),{hasChanges:g,resolved:w,gpuBytes:B,triangles:I}}updateInstances(A,e,t,s,n){const{existingInstances:i}=this;for(let r=0;r<e.length;r++){const o=i[r],a=e[r];if(!te(o,a)){if(void 0===o&&void 0!==a){const A=t[a.assetId].createGeometry(this);A instanceof MA&&A.updateFromInstance(a),this.geometries[a.assetId]=A}else if(void 0!==o&&void 0===a)this.geometries[o.assetId].dispose();else if(void 0!==o&&void 0!==a){const e=this.geometries[a.assetId];e instanceof MA&&e.updateFromInstance(a),e.update(A,void 0,s,n)}i[r]=e[r]}}}},h=Array,r(new class{materialTypes;assets;scriptUrl;createImageBitmap;initialize(A,e,t){return this.materialTypes=A,this.scriptUrl=e,this.assets=new NA(this.materialTypes,e),aA.createImageData=t,g(this.assets)}terminate(){"DedicatedWorkerGlobalScope"in self&&self.close()}async createAssets(A){return g({assets:g(this.assets),createScene:g((()=>g(new se(this.materialTypes,this.scriptUrl,this.assets))))})}});